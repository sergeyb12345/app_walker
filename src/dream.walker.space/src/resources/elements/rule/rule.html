<template>
    <div class="c_rule" if.bind="rule.name">

        <div class="c_rule-header">
            <span>${rule.name}</span>
            <div class="btn-group">
                <button type="button" click.delegate="showDetails()" class="btn btn-default">${rule.viewMode === true ? 'Hide' : 'Show'}</button>
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <ul class="dropdown-menu">
                    <li if.bind="rule.viewMode !== true"><a click.delegate="showDetails()">Show Details</a></li>
                    <li if.bind="rule.editMode !== true"><a click.delegate="startEdit()">Edit Rule</a></li>
                    <li if.bind="rule.deleteMode !== true"><a click.delegate="tryDelete()">Delete Rule</a></li>
                </ul>
            </div>

            <form class="c_rule-details" submit.delegate="applyChanges()" if.bind="rule.viewMode === true || rule.editMode === true">
                <fieldset disabled.bind="rule.editMode !== true">

                    <div class="form-group">
                        <label for="txtName">Rule Name</label>
                        <input type="text" class="form-control" id="txtName" value.bind="rule.name">
                    </div>

                    <div class="form-group">
                        <label for="txtDescription">Description</label>
                        <textarea rows="4" class="form-control" id="txtDescription" value.bind="rule.description"></textarea>
                    </div>

                    <div class="form-inline">
                        <div class="form-group">
                            <label for="ddlPeriod">Period:</label>
                            <select id="ddlPeriod" class="form-control" value.bind="rule.period">
                                <option repeat.for="period of periods" model.bind="period.id">${period.name}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="ddlCondition">Compare operator:</label>
                            <select id="ddlCondition" class="form-control" value.bind="rule.condition">
                                <option repeat.for="compareType of compareTypes" model.bind="compareType.id">${compareType.name}</option>
                            </select>
                        </div>
                    </div>

                    <!--Compare What-->
                    <div class="col-md-6">
                        <h3>Compare What</h3>
                    </div>

                    <!--Compare With-->
                    <div class="col-md-6">
                        <h3>Compare With</h3>
                    </div>

                    <div class="form-group" if.bind="rule.editMode === true">
                        <button type="submit" class="btn btn-primary btn-xs">Apply Changes</button>
                        <button type="button" click.delegate="cancelEdit()" class="btn btn-default btn-xs">Cancel</button>
                    </div>
                </fieldset>
            </form>
        </div>

    </div>
</template>