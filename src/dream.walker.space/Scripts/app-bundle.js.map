{"version":3,"sources":["app.js","environment.js","main.js","settings.js","account/edit.js","account/login.js","account/navigation.js","account/user-context.js","account/view.js","common/bootstrap-form-renderer.js","navigation/index.js","navigation/main-menu.js","navigation/sub-menu.js","navigation/sub-nav.js","resources/index.js","services/article-service.js","services/blob-services.js","strategies/create.js","strategies/list.js","strategies/navigation.js","studies/category.js","studies/navigation.js","resources/elements/article/article-block.js","resources/elements/article/block-actions.js","resources/elements/article/heading-block.js","resources/elements/article/image-block.js","resources/elements/article/index.js","resources/elements/article/new-block.js","resources/elements/article/ordered-list-block.js","resources/elements/article/paragraph-block.js","resources/elements/chart/any-chart.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/validate-binding-behavior.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/validate-trigger.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/validate-binding-behavior-base.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/validation-controller.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/validator.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/property-info.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/validation-error.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/validation-controller-factory.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/validation-errors-custom-attribute.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/validation-renderer-custom-attribute.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/implementation/rules.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/implementation/standard-validator.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/implementation/validation-messages.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/implementation/validation-parser.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/implementation/util.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/node_modules/aurelia-validation/dist/amd/implementation/validation-rules.js","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/app.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/account/edit.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/account/login.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/account/navigation.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/account/view.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/navigation/main-menu.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/navigation/sub-menu.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/navigation/sub-nav.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/strategies/create.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/strategies/list.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/strategies/navigation.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/studies/category.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/studies/navigation.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/resources/elements/article/article-block.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/resources/elements/article/block-actions.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/resources/elements/article/heading-block.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/resources/elements/article/image-block.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/resources/elements/article/new-block.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/resources/elements/article/ordered-list-block.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/resources/elements/article/paragraph-block.html","C:/justeat/sergey-balaboskin/app_walker/src/dream.walker.space/src/resources/elements/chart/any-chart.html"],"names":["App","settings","homePage","configureRouter","config","router","title","options","pushState","addPipelineStep","AuthorizeStep","map","route","moduleId","name","nav","auth","redirect","userContext","isAuthenticated","user","run","navigationInstruction","next","getAllInstructions","some","i","cancel","debug","testing","configure","Promise","warnings","wForgottenReturn","aurelia","container","get","initialize","then","use","instance","standardConfiguration","feature","plugin","developmentLogging","start","setRoot","Settings","httpClient","eventAggregator","useStandardConfiguration","withBaseUrl","sections","http","initialized","getStudiesSection","find","s","url","getSection","sectionId","fetch","response","json","catch","handleError","error","publish","Edit","validation","validateTrigger","change","addRenderer","ensure","u","firstName","required","minLength","on","activate","params","routeConfig","update","errors","length","result","navigate","Login","username","password","login","generate","window","location","href","Navigation","section","UserContext","loginRequest","Email","Password","RememberMe","method","body","status","updateRequest","Username","FirstName","View","edit","BootstrapFormRenderer","render","instruction","unrender","elements","element","remove","add","formGroup","closest","classList","message","document","createElement","className","textContent","id","appendChild","querySelector","removeChild","querySelectorAll","globalResources","MainMenu","SubMenu","editMode","subscriptions","startEdit","cancelEdit","applyChanges","sectionChanged","newValue","oldValue","attached","push","subscribe","detached","forEach","subscription","dispose","SubNav","categoriesUrl","menu","getUrl","menuItem","ArticleService","getArticle","deleteArticle","updateArticleOrder","articleId","orderId","article","ArticleId","OrderId","getArticleByUrl","categotyId","articleUrl","getCategories","getCategory","categoryUrl","getFeatured","categoryId","getArticles","saveArticle","saveCategory","category","deleteCategory","BlobServices","post","fileName","fileBody","payload","Create","List","Category","articleService","navigation","routeconfig","loadCategory","sort","blocks","sortedBlocks","filter","item","deleted","slice","a","b","loadArticle","loadArticles","articles","sortArticles","setEditMode","selectMenuItem","getArticleUrl","Blocks","block","isEditing","flag","originalArticle","Object","assign","self","alert","changed","IsDeleted","removeArticle","addBlock","isNew","BlockId","maxBlockId","maxOrderId","Text","moveBlockUp","order","up","x","moveBlockDown","down","addArticle","isFeatured","isDeleted","list","max","blockId","isDeleting","cancelDeleteArticle","confirmDeleteArticle","moveUpArticle","moveDownArticle","sortedArticles","moveBlockUpChannel","moveBlockDownChannel","blockDeletedChannel","Url","menus","editModeUrl","loadCategories","items","categories","Title","isActive","ArticleBlock","BlockActions","blockChanged","startEditing","startDeleting","cancelEditing","blockType","deleteBlock","requiresAction","channel","moveUp","moveDown","HeadingBlock","headingTypes","ImageBlock","blobServices","selectedFiles","image","subscribed","isValidBlock","updateBlock","reader","FileReader","file","addEventListener","readyState","imageUrl","content","readAsDataURL","blobToUrl","blob","URL","createObjectURL","BlobToUrlValueConverter","toView","FileListToArrayValueConverter","fileList","files","NewBlock","blockTypes","OrderedListBlock","index","Items","val","appendItem","deleteItem","pos","splice","ParagraphBlock","AnyChart","containerChanged","draw","generateSome","data","anychart","onDocumentReady","chart","stock","table","addData","mapping","mapAs","addField","plot","ohlc"],"mappings":";;;;;;;;;;;;;;;;QAIaA,cAAAA,cADZ,8BAAO,UAAP;AAGG,qBAAYC,QAAZ,EAAsB;AAAA;;AAClB,iBAAKC,QAAL,GAAgBD,SAASC,QAAzB;AACH;;sBAEDC,2CAAgBC,QAAQC,QAAQ;;AAE5BD,mBAAOE,KAAP,GAAe,aAAf;AACAF,mBAAOG,OAAP,CAAeC,SAAf,GAA2B,IAA3B;;AAEA,iBAAKH,MAAL,GAAcA,MAAd;AACAD,mBAAOK,eAAP,CAAuB,WAAvB,EAAoCC,aAApC;AACAN,mBAAOO,GAAP,CAAW,CACP,EAAEC,OAAO,CAAC,SAAD,CAAT,EAAsBC,UAAU,oBAAhC,EAAsDC,MAAK,SAA3D,EAAsER,OAAO,OAA7E,EAAsFS,KAAK,KAA3F,EADO,EAEP,EAAEH,OAAO,CAAC,YAAD,CAAT,EAAyBC,UAAU,uBAAnC,EAA4DC,MAAK,YAAjE,EAA+ER,OAAO,YAAtF,EAAoGU,MAAM,IAA1G,EAAiHD,KAAI,IAArH,EAFO,EAGP,EAAEH,OAAO,CAAC,SAAD,CAAT,EAAsBC,UAAU,oBAAhC,EAAsDC,MAAK,SAA3D,EAAsER,OAAO,SAA7E,EAAwFS,KAAI,IAA5F,EAHO,EAIP,EAAEH,OAAO,EAAT,EAAaK,UAAU,KAAKf,QAA5B,EAJO,CAAX;AAQH;;;;QAKCQ,yBADL,8BAAO,MAAP,EAAe,UAAf;AAGG,+BAAYQ,WAAZ,EAAyBjB,QAAzB,EAAmC;AAAA;;AAC/B,iBAAKkB,eAAL,GAAuBD,YAAYE,IAAZ,CAAiBD,eAAxC;AACA,iBAAKjB,QAAL,GAAgBD,SAASC,QAAzB;AACH;;gCAEDmB,mBAAIC,uBAAuBC,MAAM;AAAA;;AAC7B,gBAAID,sBAAsBE,kBAAtB,GAA2CC,IAA3C,CAAgD;AAAA,uBAAKC,EAAEtB,MAAF,CAASY,IAAd;AAAA,aAAhD,CAAJ,EAAyE;;AAErE,oBAAI,KAAKG,eAAT,EAA0B;AACtB,2BAAOI,MAAP;AACH,iBAFD,MAEO;AACH,2BAAOA,KAAKI,MAAL,CAAY,mCAAoB,SAApB,CAAZ,CAAP;AACH;AACJ,aAPD,MAOO;AACH,oBAAIL,sBAAsBE,kBAAtB,GACCC,IADD,CACM;AAAA,2BAAKC,EAAEtB,MAAF,CAASU,IAAT,KAAkB,eAAlB,IAAqC,MAAKK,eAA/C;AAAA,iBADN,CAAJ,EAC2E;AACvE,2BAAOI,KAAKI,MAAL,CAAY,mCAAoB,KAAKzB,QAAzB,CAAZ,CAAP;AACH;AACD,uBAAOqB,MAAP;AACH;AACJ;;;;;;;;;;;oBCpDU;AACbK,WAAO,IADM;AAEbC,aAAS;AAFI;;;;;;;;YCYCC,YAAAA;;;;;;;;;;AANhBC,YAAQ3B,MAAR,CAAe;AACb4B,kBAAU;AACRC,8BAAkB;AADV;AADG,KAAf;;AAMO,aAASH,SAAT,CAAmBI,OAAnB,EAA4B;;AAE/B,YAAIhB,cAAcgB,QAAQC,SAAR,CAAkBC,GAAlB,0BAAlB;AACA,YAAInC,WAAWiC,QAAQC,SAAR,CAAkBC,GAAlB,oBAAf;;AAEAlB,oBAAYmB,UAAZ,GACKC,IADL,CACU,oBAAY;;AAEdrC,qBAASoC,UAAT,GACKC,IADL,CACU,oBAAY;AACdJ,wBAAQK,GAAR,CACKC,QADL,CACc,UADd,EACyBvC,QADzB,EAEKuC,QAFL,CAEc,MAFd,EAEqBtB,WAFrB,EAGKuB,qBAHL,GAIKC,OAJL,CAIa,WAJb,EAKKA,OALL,CAKa,YALb,EAMKC,MANL,CAMY,oBANZ;;AAQA,oBAAI,sBAAYf,KAAhB,EAAuB;AACnBM,4BAAQK,GAAR,CAAYK,kBAAZ;AACH;;AAED,oBAAI,sBAAYf,OAAhB,EAAyB;AACrBK,4BAAQK,GAAR,CAAYI,MAAZ,CAAmB,iBAAnB;AACH;;AAEDT,wBAAQW,KAAR,GAAgBP,IAAhB,CAAqB,YAAM;AACvBJ,4BAAQY,OAAR;AACH,iBAFD;AAIH,aAtBL;AAyBH,SA5BL;AA8BH;;;;;;;;;;;;;;;;;;QC1CYC,mBAAAA,mBADZ;AAGG,0BAAaC,UAAb,EAAyBC,eAAzB,EAA0C;AAAA;;AACtCD,uBAAWlB,SAAX,CAAqB,kBAAU;AAC3B1B,uBACK8C,wBADL,GAEKC,WAFL,CAEiB,MAFjB;AAIH,aALD;;AAOA,iBAAKC,QAAL,GAAgB,EAAhB;AACA,iBAAKC,IAAL,GAAYL,UAAZ;AACA,iBAAKM,WAAL,GAAmB,KAAnB;AACA,iBAAKpD,QAAL,GAAgB,SAAhB;AACH;;2BAGDqD,iDAAoB;AAChB,gBAAI,KAAKD,WAAL,KAAqB,IAAzB,EAA+B;AAC3B,uBAAO,KAAKF,QAAL,CAAcI,IAAd,CAAmB;AAAA,2BAAKC,EAAEC,GAAF,KAAU,SAAf;AAAA,iBAAnB,CAAP;AACH;AACD,mBAAO,IAAP;AACH;;2BAEDC,iCAAWC,WAAW;AAClB,gBAAI,KAAKN,WAAL,KAAqB,IAAzB,EAA+B;AAC3B,uBAAO,KAAKF,QAAL,CAAcI,IAAd,CAAmB;AAAA,2BAAKC,EAAEG,SAAF,KAAgBA,SAArB;AAAA,iBAAnB,CAAP;AACH;AACD,mBAAO,IAAP;AACH;;2BAEDvB,mCAAa;AAAA;;AACT,mBAAO,KAAKgB,IAAL,CAAUQ,KAAV,CAAgB,kBAAhB,EACFvB,IADE,CACG,oBAAY;AACdwB,yBAASC,IAAT,GACCzB,IADD,CACM,oBAAY;AACV,0BAAKc,QAAL,GAAgBA,QAAhB;AACA,0BAAKE,WAAL,GAAmB,IAAnB;AACP,iBAJD;;AAMA;AACH,aATE,EAUFU,KAVE,CAUI,iBAAS;AACZ,uBAAO,MAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aAZE,CAAP;AAaH;;2BAIDD,mCAAYC,OAAO;AACf,iBAAKjB,eAAL,CAAqBkB,OAArB,CAA6B,mBAA7B,EAAkDD,KAAlD;AACA,mBAAOA,KAAP;AACH;;;;;;;;;;;;;;;;;;;;;QCnDQE,eAAAA,eADZ,8BAAO,MAAP;AAGG,sBAAYlD,WAAZ,EAAyB+B,eAAzB,EAA0CoB,UAA1C,EAAsD;AAAA;;AAClD,iBAAKnD,WAAL,GAAmBA,WAAnB;AACA,iBAAK+B,eAAL,GAAuBA,eAAvB;AACA,iBAAK7B,IAAL,GAAY,KAAKF,WAAL,CAAiBE,IAA7B;;AAEA,iBAAKiD,UAAL,GAAkBA,UAAlB;AACA,iBAAKA,UAAL,CAAgBC,eAAhB,GAAkC,mCAAgBC,MAAlD;AACA,iBAAKF,UAAL,CAAgBG,WAAhB,CAA4B,kDAA5B;;AAEA,+CACKC,MADL,CACY;AAAA,uBAAKC,EAAEC,SAAP;AAAA,aADZ,EAEKC,QAFL,GAGKC,SAHL,CAGe,CAHf,EAIKC,EAJL,CAIQ,KAAK1D,IAJb;AAKH;;uBAED2D,6BAASC,QAAQC,aAAa3D,uBAAuB;AACjD,iBAAKjB,MAAL,GAAciB,sBAAsBjB,MAApC;AACH;;uBAED6E,2BAAS;AAAA;;AACL,gBAAI,KAAKb,UAAL,CAAgBc,MAAhB,IAA0B,KAAKd,UAAL,CAAgBc,MAAhB,CAAuBC,MAAvB,GAAgC,CAA9D,EAAiE;AAC7D;AACH;;AAED,iBAAKlE,WAAL,CAAiBgE,MAAjB,CAAwB,KAAK9D,IAA7B,EACKkB,IADL,CACU,kBAAU;AACZ,oBAAI+C,WAAW,CAAf,EAAkB;AACd,0BAAKhF,MAAL,CAAYiF,QAAZ,CAAqB,MAArB;AACH;AACJ,aALL,EAMCtB,KAND,CAMO,iBAAS;AACZ,uBAAO,MAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aARD;AAUH;;uBAEDD,mCAAYC,OAAO;AACf,iBAAKjB,eAAL,CAAqBkB,OAArB,CAA6B,mBAA7B,EAAkDD,KAAlD;AACH;;;;;;;;;;;;;;;;;;;;;QC3CQqB,gBAAAA,gBADZ,8BAAO,MAAP;AAGG,uBAAYrE,WAAZ,EAAyB+B,eAAzB,EAA2C;AAAA;;AACvC,iBAAK/B,WAAL,GAAmBA,WAAnB;AACA,iBAAK+B,eAAL,GAAuBA,eAAvB;;AAEA,iBAAKuC,QAAL,GAAgB,EAAhB;AACA,iBAAKC,QAAL,GAAgB,EAAhB;AACH;;wBAEDV,6BAASC,QAAQC,aAAa3D,uBAAuB;AACjD,iBAAKjB,MAAL,GAAciB,sBAAsBjB,MAApC;AACH;;wBAEDqF,yBAAQ;AAAA;;AACJ,iBAAKxE,WAAL,CAAiBwE,KAAjB,CAAuB,KAAKF,QAA5B,EAAsC,KAAKC,QAA3C,EACKnD,IADL,CACU,kBAAU;AACZ,oBAAI+C,WAAW,CAAf,EAAkB;AACd,wBAAI3B,MAAM,MAAKrD,MAAL,CAAYsF,QAAZ,CAAqB,YAArB,CAAV;AACAC,2BAAOC,QAAP,CAAgBC,IAAhB,GAAuBpC,GAAvB;AACH;AACJ,aANL,EAOCM,KAPD,CAOO,iBAAS;AACZ,uBAAO,MAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aATD;AAUH;;wBAEDD,mCAAYC,OAAO;AACf,iBAAKjB,eAAL,CAAqBkB,OAArB,CAA6B,mBAA7B,EAAkDD,KAAlD;AACH;;;;;;;;;;;;;;;;;;QChCQ6B,qBAAAA;;;;;6BAET5F,2CAAgBC,QAAQC,QAAQ;AAC5BD,mBAAOE,KAAP,GAAe,OAAf;;AAEAF,mBAAOO,GAAP,CAAW,CACP,EAAEC,OAAO,CAAC,EAAD,EAAK,OAAL,CAAT,EAAwBC,UAAU,SAAlC,EAA6CC,MAAM,eAAnD,EAAoER,OAAO,OAA3E,EAAoFS,KAAK,KAAzF,EADO,EAEP,EAAEH,OAAO,CAAC,MAAD,CAAT,EAAmBC,UAAU,QAA7B,EAAuCC,MAAM,cAA7C,EAA6DR,OAAO,cAApE,EAAoFS,KAAK,IAAzF,EAA+FC,MAAM,IAArG,EAFO,EAGP,EAAEJ,OAAO,CAAC,MAAD,CAAT,EAAmBC,UAAU,QAA7B,EAAuCC,MAAM,cAA7C,EAA6DR,OAAO,cAApE,EAAoFS,KAAK,IAAzF,EAA+FC,MAAM,IAArG,EAHO,CAAX;;AAMA,iBAAKX,MAAL,GAAcA,MAAd;AACA,iBAAK2F,OAAL,GAAe5F,OAAOE,KAAtB;AACH;;;;;;;;;;;;;;;;;;;;;QCTQ2F,sBAAAA,sBADZ;AAGG,6BAAajD,UAAb,EAAyBC,eAAzB,EAA0C;AAAA;;AACtCD,uBAAWlB,SAAX,CAAqB,kBAAU;AAC3B1B,uBACK8C,wBADL,GAEKC,WAFL,CAEiB,MAFjB;AAIH,aALD;;AAOA,iBAAKE,IAAL,GAAYL,UAAZ;AACA,iBAAKC,eAAL,GAAuBA,eAAvB;AACA,iBAAK7B,IAAL,GAAY,EAAZ;AACH;;8BAGDiB,mCAAa;AAAA;;AACT,mBAAO,KAAKgB,IAAL,CAAUQ,KAAV,CAAgB,cAAhB,EACFvB,IADE,CACG,oBAAY;AACd,uBAAOwB,SAASC,IAAT,GAAgBzB,IAAhB,CAAqB,gBAAQ;AAChC,0BAAKlB,IAAL,GAAYA,IAAZ;AACH,iBAFM,CAAP;AAGH,aALE,EAMF4C,KANE,CAMI,iBAAS;AACZ,sBAAKC,WAAL,CAAiBC,KAAjB;AACH,aARE,CAAP;AASH;;8BAGDwB,uBAAMF,UAAUC,UAAU;AAAA;;AACtB,gBAAIS,eAAe;AACfC,uBAAOX,QADQ;AAEfY,0BAAUX,QAFK;AAGfY,4BAAY;AAHG,aAAnB;;AAMA,mBAAO,KAAKhD,IAAL,CAAUQ,KAAV,CAAgB,eAAhB,EACH;AACIyC,wBAAQ,MADZ;AAEIC,sBAAM,8BAAKL,YAAL;AAFV,aADG,EAKF5D,IALE,CAKG,oBAAY;AACd,uBAAOwB,SAASC,IAAT,GACFzB,IADE,CACG,kBAAU;AACZ,wBAAI+C,OAAOmB,MAAP,KAAkB,CAAtB,EAAyB;AACrB,+BAAKpF,IAAL,GAAYiE,OAAOjE,IAAnB;AACH;AACD,2BAAOiE,OAAOmB,MAAd;AACH,iBANE,CAAP;AAOH,aAbE,EAcFxC,KAdE,CAcI,iBAAS;AACZ,uBAAO,OAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aAhBE,CAAP;AAiBH;;8BAEDgB,yBAAO9D,MAAM;AAAA;;AACT,gBAAIqF,gBAAgB;AAChBC,0BAAWtF,KAAKoE,QADA;AAEhBmB,2BAAWvF,KAAKuD;AAFA,aAApB;;AAKA,mBAAO,KAAKtB,IAAL,CAAUQ,KAAV,CAAgB,gBAAhB,EACH;AACIyC,wBAAQ,KADZ;AAEIC,sBAAM,8BAAKE,aAAL;AAFV,aADG,EAKFnE,IALE,CAKG,oBAAY;AACd,uBAAOwB,SAASC,IAAT,GACFzB,IADE,CACG,kBAAU;AACZ,wBAAI+C,OAAOmB,MAAP,KAAkB,CAAtB,EAAyB;AACrB,+BAAKpF,IAAL,GAAYiE,OAAOjE,IAAnB;AACH;AACD,2BAAOiE,OAAOmB,MAAd;AACH,iBANE,CAAP;AAOH,aAbE,EAcFxC,KAdE,CAcI,iBAAS;AACZ,uBAAO,OAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aAhBE,CAAP;AAiBH;;8BAEDD,mCAAYC,OAAO;AACf,iBAAKjB,eAAL,CAAqBkB,OAArB,CAA6B,mBAA7B,EAAkDD,KAAlD;AACH;;;;;;;;;;;;;;;;;;;;;QCnFQ0C,eAAAA,eADZ,8BAAO,MAAP;AAGG,sBAAY1F,WAAZ,EAAyB;AAAA;;AACrB,iBAAKE,IAAL,GAAYF,YAAYE,IAAxB;AACH;;uBAED2D,6BAASC,QAAQC,aAAa3D,uBAAuB;AACjD,iBAAKjB,MAAL,GAAciB,sBAAsBjB,MAApC;AACH;;uBAGDwG,uBAAO;AACH,iBAAKxG,MAAL,CAAYiF,QAAZ,CAAqB,MAArB;AACH;;;;;;;;;;;;;;;;;;;QCfQwB,gCAAAA;;;;;wCACTC,yBAAOC,aAAa;AAChB,iCAAgCA,YAAYC,QAA5C,kHAAsD;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,oBAA3C/C,KAA2C,SAA3CA,KAA2C;AAAA,oBAApCgD,QAAoC,SAApCA,QAAoC;;AAClD,sCAAoBA,QAApB,yHAA8B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,wBAArBC,OAAqB;;AAC1B,yBAAKC,MAAL,CAAYD,OAAZ,EAAqBjD,KAArB;AACH;AACJ;;AAEL,kCAAgC8C,YAAYD,MAA5C,yHAAoD;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,oBAAzC7C,KAAyC,SAAzCA,KAAyC;AAAA,oBAAlCgD,QAAkC,SAAlCA,QAAkC;;AAChD,sCAAoBA,QAApB,yHAA8B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,wBAArBC,QAAqB;;AAC1B,yBAAKE,GAAL,CAASF,QAAT,EAAkBjD,KAAlB;AACH;AACJ;AACJ;;wCAEDmD,mBAAIF,SAASjD,OAAO;AAChB,gBAAMoD,YAAYH,QAAQI,OAAR,CAAgB,aAAhB,CAAlB;AACA,gBAAI,CAACD,SAAL,EAAgB;AACZ;AACH;;AAGDA,sBAAUE,SAAV,CAAoBH,GAApB,CAAwB,WAAxB;;AAGA,gBAAMI,UAAUC,SAASC,aAAT,CAAuB,MAAvB,CAAhB;AACAF,oBAAQG,SAAR,GAAoB,+BAApB;AACAH,oBAAQI,WAAR,GAAsB3D,MAAMuD,OAA5B;AACAA,oBAAQK,EAAR,2BAAmC5D,MAAM4D,EAAzC;AACAR,sBAAUS,WAAV,CAAsBN,OAAtB;AACH;;wCAEDL,yBAAOD,SAASjD,OAAO;AACnB,gBAAMoD,YAAYH,QAAQI,OAAR,CAAgB,aAAhB,CAAlB;AACA,gBAAI,CAACD,SAAL,EAAgB;AACZ;AACH;;AAGD,gBAAMG,UAAUH,UAAUU,aAAV,0BAA+C9D,MAAM4D,EAArD,CAAhB;AACA,gBAAIL,OAAJ,EAAa;AACTH,0BAAUW,WAAV,CAAsBR,OAAtB;;AAGA,oBAAIH,UAAUY,gBAAV,CAA2B,gCAA3B,EAA6D9C,MAA7D,KAAwE,CAA5E,EAA+E;AAC3EkC,8BAAUE,SAAV,CAAoBJ,MAApB,CAA2B,WAA3B;AACH;AACJ;AACJ;;;;;;;;;;;YClDetF,YAAAA;AAAT,aAASA,SAAT,CAAmB1B,MAAnB,EAA2B;AAC9BA,eAAO+H,eAAP,CACI,aADJ,EAEI,YAFJ,EAGI,WAHJ;AAKH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCJYC,mBAAAA,qBAGT,oBAAc;AAAA;;AAAA;AACb;;;mBAHkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCCVC,kBAAAA,kBADZ;AAKG,yBAAapF,eAAb,EAA8B;AAAA;;AAAA;;AAAA;;AAC1B,iBAAKqF,QAAL,GAAgB,KAAhB;AACA,iBAAKrF,eAAL,GAAuBA,eAAvB;AACA,iBAAKsF,aAAL,GAAqB,EAArB;AACH;;0BAEDC,iCAAY;AACR,iBAAKF,QAAL,GAAgB,IAAhB;AACA,iBAAKrF,eAAL,CAAqBkB,OAArB,CAA6B,KAAK6B,OAAL,GAAe,YAA5C,EAA0D,KAAKsC,QAA/D;AACH;;0BAEDG,mCAAa;AACT,iBAAKH,QAAL,GAAgB,KAAhB;AACA,iBAAKrF,eAAL,CAAqBkB,OAArB,CAA6B,KAAK6B,OAAL,GAAe,YAA5C,EAA0D,KAAKsC,QAA/D;AACH;;0BAEDI,uCAAe;AACX,iBAAKzF,eAAL,CAAqBkB,OAArB,CAA6B,KAAK6B,OAAL,GAAe,OAA5C,EAAqD,IAArD;AACH;;0BAED2C,yCAAeC,UAAUC,UAAU;AAC/B,iBAAK7C,OAAL,GAAe4C,QAAf;AACH;;0BAEDE,+BAAW;AAAA;;AACP,iBAAKP,aAAL,CAAmBQ,IAAnB,CACI,KAAK9F,eAAL,CAAqB+F,SAArB,CAA+B,KAAKhD,OAAL,GAAe,cAA9C,EAA8D;AAAA,uBAAQ,MAAKyC,UAAL,EAAR;AAAA,aAA9D,CADJ;AAEH;;0BAEDQ,+BAAW;AACP,iBAAKV,aAAL,CAAmBW,OAAnB,CAA2B,UAAUC,YAAV,EAAwB;AAC/CA,6BAAaC,OAAb;AACH,aAFD;AAGH;;;;;;;;;;;;;;;;;;;;;;;;;;;QCrCQC,iBAAAA,iBADZ;AAGG,wBAAapG,eAAb,EAA8B;AAAA;;AAC1B,iBAAKA,eAAL,GAAuBA,eAAvB;AACA,iBAAKqG,aAAL,GAAqB,EAArB;AACH;;yBAEDvE,6BAASwE,MAAM;AACX,iBAAKA,IAAL,GAAYA,IAAZ;AACA,iBAAKD,aAAL,GAAqB,KAAKC,IAAL,CAAUvD,OAAV,CAAkBtC,GAAlB,GAAwB,cAAxB,GAA0C,KAAK6F,IAAL,CAAUvD,OAAV,CAAkBpC,SAAjF;AACH;;yBAED4F,yBAAOC,UAAU;AACb,mBAAO,KAAK,KAAKF,IAAL,CAAUvD,OAAV,CAAkBtC,GAAvB,GAA6B,GAA7B,GAAmC+F,SAAS/F,GAAnD;AACH;;yBAED8E,iCAAY;AACR,iBAAKvF,eAAL,CAAqBkB,OAArB,CAA6B,KAAKoF,IAAL,CAAUvD,OAAV,CAAkBtC,GAAlB,GAAwB,aAArD,EAAoE,IAApE;AACH;;yBAEDgF,uCAAe;AACX,iBAAKzF,eAAL,CAAqBkB,OAArB,CAA6B,KAAKoF,IAAL,CAAUvD,OAAV,CAAkBtC,GAAlB,GAAwB,eAArD,EAAsE,IAAtE;AACH;;yBAED+E,mCAAa;AACT,iBAAKxF,eAAL,CAAqBkB,OAArB,CAA6B,KAAKoF,IAAL,CAAUvD,OAAV,CAAkBtC,GAAlB,GAAwB,cAArD,EAAqE,IAArE;AACH;;;;;;;;;;;UC9BW5B,YAAAA;AAAT,WAASA,SAAT,CAAmB1B,MAAnB,EAA2B;AAChCA,WAAO+H,eAAP,CAAuB,CAAC,4BAAD,CAAvB;AACA/H,WAAO+H,eAAP,CACE,kCADF,EAEE,mCAFF,EAGE,qCAHF,EAIE,gCAJF,EAKE,uCALF,EAME,kCANF,EAOE,8BAPF;AASD;;;;;;;;;;;;;;;;;;QCNYuB,yBAAAA,yBADZ;AAGG,gCAAa1G,UAAb,EAAyBC,eAAzB,EAA0C;AAAA;;AACtCD,uBAAWlB,SAAX,CAAqB,kBAAU;AAC3B1B,uBACK8C,wBADL,GAEKC,WAFL,CAEiB,MAFjB;AAIH,aALD;;AAOA,iBAAKE,IAAL,GAAYL,UAAZ;AACA,iBAAKC,eAAL,GAAuBA,eAAvB;AACH;;iCAGD0G,iCAAW7B,IAAI;AAAA;;AACX,mBAAO,KAAKzE,IAAL,CAAUQ,KAAV,CAAgB,aAAWiE,EAA3B,EACFxF,IADE,CACG,oBAAY;AACd,uBAAOwB,SAASC,IAAT,EAAP;AACH,aAHE,EAIFC,KAJE,CAII,iBAAS;AACZ,uBAAO,MAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aANE,CAAP;AAOH;;iCAED0F,uCAAc9B,IAAI;AAAA;;AACd,mBAAO,KAAKzE,IAAL,CAAUQ,KAAV,CAAgB,aAAWiE,EAA3B,EAA+B,EAACxB,QAAQ,QAAT,EAA/B,EACFhE,IADE,CACG,oBAAY;AACd,uBAAOwB,SAASC,IAAT,EAAP;AACH,aAHE,EAIFC,KAJE,CAII,iBAAS;AACZ,uBAAO,OAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aANE,CAAP;AAOH;;iCAED2F,iDAAmBC,WAAWC,SAAS;AAAA;;AACnC,gBAAIC,UAAU;AACVC,2BAAWH,SADD;AAEVI,yBAASH;AAFC,aAAd;;AAKA,mBAAO,KAAK1G,IAAL,CAAUQ,KAAV,CAAgB,aAAWiG,SAAX,GAAqB,QAArC,EAA+C,EAACxD,QAAQ,KAAT,EAAgBC,MAAK,8BAAKyD,OAAL,CAArB,EAA/C,EACF1H,IADE,CACG,oBAAY;AACd,uBAAOwB,SAASC,IAAT,EAAP;AACH,aAHE,EAIFC,KAJE,CAII,iBAAS;AACZ,uBAAO,OAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aANE,CAAP;AAOH;;iCAEDiG,2CAAgBC,YAAYC,YAAY;AAAA;;AACpC,mBAAO,KAAKhH,IAAL,CAAUQ,KAAV,CAAgB,iBAAeuG,UAAf,GAA0B,GAA1B,GAA8BC,UAA9C,EACF/H,IADE,CACG,oBAAY;AACd,uBAAOwB,SAASC,IAAT,EAAP;AACH,aAHE,EAIFC,KAJE,CAII,iBAAS;AACZ,uBAAO,OAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aANE,CAAP;AAOH;;iCAGDP,iCAAWD,KAAK;AAAA;;AACZ,mBAAO,KAAKL,IAAL,CAAUQ,KAAV,CAAgB,qBAAmBH,GAAnC,EACFpB,IADE,CACG,oBAAY;AACd,uBAAOwB,SAASC,IAAT,EAAP;AACH,aAHE,EAIFC,KAJE,CAII,iBAAS;AACZ,uBAAO,OAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aANE,CAAP;AAOH;;iCAEDoG,uCAAc1G,WAAW;AAAA;;AAErB,mBAAO,KAAKP,IAAL,CAAUQ,KAAV,CAAgB,wBAAsBD,SAAtC,EACFtB,IADE,CACG,oBAAY;AACd,uBAAOwB,SAASC,IAAT,EAAP;AACH,aAHE,EAIFC,KAJE,CAII,iBAAS;AACZ,uBAAO,OAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aANE,CAAP;AAOH;;iCAEDqG,mCAAaC,aAAa;AAAA;;AACtB,mBAAO,KAAKnH,IAAL,CAAUQ,KAAV,CAAgB,sBAAoB2G,WAApC,EACFlI,IADE,CACG,oBAAY;AACd,uBAAOwB,SAASC,IAAT,EAAP;AACH,aAHE,EAIFC,KAJE,CAII,iBAAS;AACZ,uBAAO,OAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aANE,CAAP;AAOH;;iCAEDuG,mCAAYC,YAAY;AAAA;;AACpB,mBAAO,KAAKrH,IAAL,CAAUQ,KAAV,CAAgB,aAAW6G,UAAX,GAAsB,WAAtC,EACFpI,IADE,CACG,oBAAY;AACd,uBAAOwB,SAASC,IAAT,EAAP;AACH,aAHE,EAIFC,KAJE,CAII,iBAAS;AACZ,uBAAO,OAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aANE,CAAP;AAOH;;iCAEDyG,mCAAYD,YAAY;AAAA;;AACpB,mBAAO,KAAKrH,IAAL,CAAUQ,KAAV,CAAgB,aAAW6G,UAAX,GAAsB,MAAtC,EACFpI,IADE,CACG,oBAAY;AACd,uBAAOwB,SAASC,IAAT,EAAP;AACH,aAHE,EAIFC,KAJE,CAII,iBAAS;AACZ,uBAAO,OAAKC,WAAL,CAAiBC,KAAjB,CAAP;AACH,aANE,CAAP;AAOH;;iCAED0G,mCAAYZ,SAAS;AACjB,mBAAO,KAAK3G,IAAL,CAAUQ,KAAV,CAAgB,SAAhB,EAA2B;AAC9ByC,wBAAQ,MADsB;AAE9BC,sBAAK,8BAAKyD,OAAL;AAFyB,aAA3B,EAIN1H,IAJM,CAID;AAAA,uBAAYwB,SAASC,IAAT,EAAZ;AAAA,aAJC,CAAP;AAKH;;iCAED8G,qCAAaC,UAAU;AACnB,mBAAO,KAAKzH,IAAL,CAAUQ,KAAV,CAAgB,kBAAhB,EAAoC;AACvCyC,wBAAQ,MAD+B;AAEvCC,sBAAK,8BAAKuE,QAAL;AAFkC,aAApC,EAINxI,IAJM,CAID;AAAA,uBAAYwB,SAASC,IAAT,EAAZ;AAAA,aAJC,CAAP;AAKH;;iCAEDgH,yCAAeL,YAAY;AACvB,mBAAO,KAAKrH,IAAL,CAAUQ,KAAV,CAAgB,sBAAoB6G,UAApC,EAAgD;AACnDpE,wBAAQ;AAD2C,aAAhD,EAGNhE,IAHM,CAGD;AAAA,uBAAYwB,SAASC,IAAT,EAAZ;AAAA,aAHC,CAAP;AAIH;;iCAEDE,mCAAYC,OAAO;AACf,iBAAKjB,eAAL,CAAqBkB,OAArB,CAA6B,mBAA7B,EAAkDD,KAAlD;AACA,mBAAOA,KAAP;AACH;;;;;;;;;;;;;;;;;;;;;QC3IQ8G,uBAAAA,uBADZ;AAIG,8BAAa3H,IAAb,EAAmB;AAAA;;AACfA,iBAAKvB,SAAL,CAAe,kBAAU;AACrB1B,uBACK8C,wBADL,GAEKC,WAFL,CAEiB,MAFjB;AAIH,aALD;;AAOA,iBAAKE,IAAL,GAAYA,IAAZ;AACH;;+BAGD4H,qBAAKC,UAAUC,UAAU;AACrB,gBAAIC,UAAU;AACVF,0BAAUA,QADA;AAEVC,0BAAUA;AAFA,aAAd;;AAKA,mBAAO,KAAK9H,IAAL,CAAUQ,KAAV,CAAgB,MAAhB,EAAwB;AAC3ByC,wBAAQ,MADmB;AAE3BC,sBAAK,8BAAK6E,OAAL;AAFsB,aAAxB,EAIN9I,IAJM,CAID;AAAA,uBAAYwB,SAASC,IAAT,EAAZ;AAAA,aAJC,CAAP;AAKH;;;;;;;;;;;;;;;;;;MC9BQsH,iBAAAA;;;;;;;;;;;;;;;;;MCAAC,eAAAA;;;;;;;;;;;;;;;;;QCAAvF,qBAAAA;;;;;6BAET5F,2CAAgBC,QAAQC,QAAQ;AAC5BD,mBAAOE,KAAP,GAAe,YAAf;;AAGAF,mBAAOO,GAAP,CAAW,CACP,EAAEC,OAAO,CAAC,EAAD,EAAI,MAAJ,CAAT,EAAsBC,UAAU,QAAhC,EAA0CC,MAAK,MAA/C,EAAuDR,OAAO,YAA9D,EAA4ES,KAAI,IAAhF,EADO,EAEP,EAAEH,OAAO,CAAC,QAAD,CAAT,EAAqBC,UAAU,UAA/B,EAA2CC,MAAK,QAAhD,EAA0DR,OAAO,qBAAjE,EAAwFS,KAAI,IAA5F,EAFO,CAAX;;AAKA,iBAAKV,MAAL,GAAcA,MAAd;AACA,iBAAK2F,OAAL,GAAe5F,OAAOE,KAAtB;AACH;;;;;;;;;;;;;;;;;;;;;QCPQiL,mBAAAA,mBADZ;AAGG,0BAAatI,eAAb,EAA8BuI,cAA9B,EAA8CC,UAA9C,EAA0D;AAAA;;AAEtD,iBAAKxI,eAAL,GAAuBA,eAAvB;AACA,iBAAKuI,cAAL,GAAsBA,cAAtB;AACA,iBAAKjD,aAAL,GAAqB,EAArB;AACA,iBAAKD,QAAL,GAAgB,KAAhB;AACA,iBAAKmD,UAAL,GAAkBA,UAAlB;AACA,iBAAKzB,OAAL,GAAe,EAAf;AACH;;2BAEDjF,6BAASC,QAAQ0G,aAAa;AAC1B,iBAAKrB,UAAL,GAAkB,SAAlB;;AAEA,gBAAI,CAACrF,OAAO8F,QAAZ,EAAsB;AAClB9F,uBAAO8F,QAAP,GAAkB,SAAlB;AACH;;AAED,gBAAI9F,OAAOgF,OAAX,EAAoB;AAChB,qBAAKK,UAAL,GAAkBrF,OAAOgF,OAAzB;AACH;;AAED,iBAAK2B,YAAL,CAAkB3G,OAAO8F,QAAzB;AACH;;2BAEDc,uBAAO;AACH,gBAAI,KAAK5B,OAAL,CAAa6B,MAAjB,EAAyB;AACrB,qBAAK7B,OAAL,CAAa8B,YAAb,GAA4B,KAAK9B,OAAL,CAAa6B,MAAb,CACvBE,MADuB,CAChB,UAASC,IAAT,EAAe;AACnB,2BAAOA,KAAKC,OAAL,KAAiB,IAAxB;AACH,iBAHuB,EAIvBC,KAJuB,CAIjB,CAJiB,EAKvBN,IALuB,CAKlB,UAACO,CAAD,EAAIC,CAAJ,EAAU;AACZ,2BAAQD,EAAE,SAAF,IAAeC,EAAE,SAAF,CAAvB;AACH,iBAPuB,CAA5B;AAQH;AACJ;;2BAGDC,mCAAY3B,YAAYL,YAAY;AAAA;;AAEhC,iBAAKmB,cAAL,CAAoBrB,eAApB,CAAoCO,UAApC,EAAgDL,UAAhD,EACC/H,IADD,CACM,kBAAU;AACZ,sBAAK0H,OAAL,GAAe3E,MAAf;AACA,sBAAKuG,IAAL;AACF,aAJF;AAKH;;2BAEDU,qCAAa5B,YAAY;AAAA;;AACrB,iBAAKc,cAAL,CAAoBb,WAApB,CAAgCD,UAAhC,EACKpI,IADL,CACU,oBAAY;AACd,uBAAKiK,QAAL,GAAgBA,QAAhB;AACA,uBAAKC,YAAL;AACH,aAJL;AAKH;;2BAEDb,qCAAanB,aAAa;AAAA;;AACtB,iBAAKiC,WAAL,CAAiB,KAAjB;;AAEA,iBAAKjB,cAAL,CAAoBjB,WAApB,CAAgCC,WAAhC,EACKlI,IADL,CACU,oBAAY;AACd,uBAAKwI,QAAL,GAAgBA,QAAhB;;AAEA,oBAAI,OAAKA,QAAL,IAAiB,OAAKA,QAAL,CAAcJ,UAAd,GAA2B,CAAhD,EAAmD;AAC/C,2BAAKe,UAAL,CAAgBiB,cAAhB,CAA+B5B,SAASpH,GAAxC;;AAEA,2BAAK2I,WAAL,CAAiB,OAAKvB,QAAL,CAAcJ,UAA/B,EAA2C,OAAKL,UAAhD;AACA,2BAAKiC,YAAL,CAAkB,OAAKxB,QAAL,CAAcJ,UAAhC;AACH;AACJ,aAVL;AAWH;;2BAEDiC,uCAAc3C,SAAS;AACnB,mBAAO,MAAM,KAAKyB,UAAL,CAAgBzF,OAAhB,CAAwBtC,GAA9B,GAAoC,GAApC,GAA0C,KAAKoH,QAAL,CAAcpH,GAAxD,GAA8D,GAA9D,GAAoEsG,QAAQtG,GAAnF;AACH;;2BAED+I,mCAAanE,UAAU;AACnB,iBAAKA,QAAL,GAAgBA,QAAhB;AACA,iBAAKmD,UAAL,CAAgBlC,IAAhB,CAAqBjB,QAArB,GAAgCA,QAAhC;;AAEA,gBAAI,KAAK0B,OAAL,IAAiB,KAAKA,OAAL,IAAgB,IAAjC,IAA0C,KAAKA,OAAL,CAAa6B,MAAvD,IAAkE,KAAK7B,OAAL,CAAa6B,MAAb,IAAuB,IAA7F,EAAmG;AAC/F,qBAAK7B,OAAL,CAAa4C,MAAb,CAAoB1D,OAApB,CAA4B,UAAS2D,KAAT,EAAgB;AACxCA,0BAAMvE,QAAN,GAAiBA,QAAjB;AACA,wBAAIA,aAAa,IAAjB,EAAuB;AACnBuE,8BAAMC,SAAN,GAAkB,KAAlB;AACH;AACJ,iBALD;AAMH;AACJ;;2BAEDtE,+BAAUuE,MAAM;AACZ,iBAAKC,eAAL,GAAuBC,OAAOC,MAAP,CAAc,EAAd,EAAkB,KAAKlD,OAAvB,CAAvB;AACA,iBAAKyC,WAAL,CAAiB,IAAjB;AACH;;2BAEDhE,iCAAWsE,MAAM;AACb,iBAAK/C,OAAL,GAAe,KAAKgD,eAApB;AACA,iBAAKP,WAAL,CAAiB,KAAjB;AACH;;2BAED7B,mCAAYmC,MAAM;AAAA;;AACd,gBAAID,YAAY,KAAhB;AACA,gBAAIK,OAAO,IAAX;;AAEA,iBAAKnD,OAAL,CAAa4C,MAAb,CAAoB1D,OAApB,CAA4B,UAAS2D,KAAT,EAAgB;AACxC,oBAAIA,MAAMC,SAAN,KAAoB,IAAxB,EAA8B;AAC1BA,gCAAY,IAAZ;AACH;AACJ,aAJD;;AAMA,gBAAIA,cAAc,IAAlB,EAAwB;AACpB,qBAAKtB,cAAL,CAAoBZ,WAApB,CAAgC,KAAKZ,OAArC,EACK1H,IADL,CACU,oBAAY;AACd,2BAAKmK,WAAL,CAAiB,KAAjB;AACH,iBAHL;AAIH,aALD,MAKO;AACHW,sBAAM,mEAAN;AACH;;AAED,gBAAI,KAAKb,QAAT,EAAmB;AACf,qBAAKA,QAAL,CAAcrD,OAAd,CAAsB,UAASc,OAAT,EAAkB;AACpC,wBAAIA,QAAQqD,OAAR,KAAoB,IAAxB,EAA8B;AAC1B,4BAAIrD,QAAQsD,SAAZ,EAAuB;AACnBH,iCAAKI,aAAL,CAAmBvD,QAAQF,SAA3B;AACH,yBAFD,MAEO;AACHqD,iCAAKtD,kBAAL,CAAwBG,QAAQF,SAAhC,EAA2CE,QAAQD,OAAnD;AACH;AACJ;AACJ,iBARD;AASH;AACJ;;2BAEDyD,+BAAW;AACP,gBAAI,CAAC,KAAKxD,OAAL,CAAa6B,MAAlB,EAA0B;AACtB,qBAAK7B,OAAL,CAAa6B,MAAb,GAAsB,EAAtB;AACH;;AAED,gBAAIgB,QAAQ;AACRY,uBAAO,IADC;AAERC,yBAAS,KAAKC,UAAL,CAAgB,KAAK3D,OAAL,CAAa6B,MAA7B,IAAuC,CAFxC;AAGR3B,yBAAS,KAAK0D,UAAL,CAAgB,KAAK5D,OAAL,CAAa6B,MAA7B,IAAuC,CAHxC;;AAKRgC,sBAAM;AALE,aAAZ;;AAQA,iBAAK7D,OAAL,CAAa6B,MAAb,CAAoB9C,IAApB,CAAyB8D,KAAzB;AACA,iBAAKjB,IAAL;AACH;;2BAEDkC,mCAAYjB,OAAO;AACf,gBAAIkB,QAAQlB,MAAM9C,OAAN,GAAgB,CAA5B;AACA,gBAAIiE,KAAK,KAAKhE,OAAL,CAAa6B,MAAb,CAAoBrI,IAApB,CAAyB;AAAA,uBAAKyK,EAAElE,OAAF,KAAcgE,KAAnB;AAAA,aAAzB,CAAT;AACA,gBAAGC,MAAMA,GAAGjE,OAAH,KAAegE,KAAxB,EAA+B;AAC3BC,mBAAGjE,OAAH,GAAa8C,MAAM9C,OAAnB;AACA8C,sBAAM9C,OAAN,GAAgBgE,KAAhB;;AAEA,qBAAKnC,IAAL;AACH;AACJ;;2BAEDsC,uCAAcrB,OAAO;AACjB,gBAAIkB,QAAQlB,MAAM9C,OAAN,GAAgB,CAA5B;AACA,gBAAIoE,OAAO,KAAKnE,OAAL,CAAa6B,MAAb,CAAoBrI,IAApB,CAAyB;AAAA,uBAAKyK,EAAElE,OAAF,KAAcgE,KAAnB;AAAA,aAAzB,CAAX;AACA,gBAAGI,QAAQA,KAAKpE,OAAL,KAAiBgE,KAA5B,EAAmC;AAC/BI,qBAAKpE,OAAL,GAAe8C,MAAM9C,OAArB;AACA8C,sBAAM9C,OAAN,GAAgBgE,KAAhB;;AAEA,qBAAKnC,IAAL;AACH;AACJ;;2BAEDwC,mCAAa;AACT,iBAAKpE,OAAL,GAAe;AACXF,2BAAW,CADA;AAEXY,4BAAY,KAAKI,QAAL,CAAcJ,UAFf;AAGX2D,4BAAY,KAHD;AAIXC,2BAAW,KAJA;AAKXhO,uBAAO,aALI;AAMXoD,qBAAK,aANM;AAOXqG,yBAAS,KAAK6D,UAAL,CAAgB,KAAKrB,QAArB,IAAiC,CAP/B;AAQXV,wBAAQ;AARG,aAAf;AAUH;;2BAED+B,iCAAWW,MAAM;AACb,gBAAIC,MAAM,CAAV;AACAD,iBAAKrF,OAAL,CAAa,UAAS8C,IAAT,EAAe;AACxB,oBAAIwC,MAAMxC,KAAKjC,OAAf,EAAwB;AACpByE,0BAAMxC,KAAKjC,OAAX;AACH;AACJ,aAJD;AAKA,mBAAOyE,GAAP;AACH;;2BAEDb,iCAAWY,MAAM;AACb,gBAAIC,MAAM,CAAV;AACAD,iBAAKrF,OAAL,CAAa,UAAS8C,IAAT,EAAe;AACxB,oBAAIwC,MAAMxC,KAAKyC,OAAf,EAAwB;AACpBD,0BAAMxC,KAAKyC,OAAX;AACH;AACJ,aAJD;AAKA,mBAAOD,GAAP;AACH;;2BAED5E,uCAAcI,SAAS;AACnBA,oBAAQ0E,UAAR,GAAqB,IAArB;AACH;;2BAEDC,mDAAoB3E,SAAS;AACzBA,oBAAQ0E,UAAR,GAAqB,KAArB;AACH;;2BAEDE,qDAAqB5E,SAAS;AAC1BA,oBAAQsD,SAAR,GAAoB,IAApB;AACH;;2BAEDC,uCAAczD,WAAW;AACrB,iBAAK0B,cAAL,CAAoB5B,aAApB,CAAkCE,SAAlC,EACKxH,IADL,CACU,oBAAY,CACjB,CAFL;AAGH;;2BAEDuH,iDAAmBC,WAAWC,SAAS;AACnC,iBAAKyB,cAAL,CAAoB3B,kBAApB,CAAuCC,SAAvC,EAAkDC,OAAlD,EACKzH,IADL,CACU,oBAAY,CACjB,CAFL;AAGH;;2BAEDuM,uCAAc7E,SAAS;AACnB,gBAAI+D,QAAQ/D,QAAQD,OAAR,GAAkB,CAA9B;AACA,gBAAIiE,KAAK,KAAKzB,QAAL,CAAc/I,IAAd,CAAmB;AAAA,uBAAKyK,EAAElE,OAAF,KAAcgE,KAAnB;AAAA,aAAnB,CAAT;;AAEA,gBAAGC,MAAMA,GAAGjE,OAAH,KAAegE,KAAxB,EAA+B;AAC3BC,mBAAGjE,OAAH,GAAaC,QAAQD,OAArB;AACAiE,mBAAGX,OAAH,GAAa,IAAb;AACArD,wBAAQD,OAAR,GAAkBgE,KAAlB;AACA/D,wBAAQqD,OAAR,GAAkB,IAAlB;;AAEA,qBAAKb,YAAL;AACH;AACJ;;2BAEDsC,2CAAgB9E,SAAS;AACrB,gBAAI+D,QAAQ/D,QAAQD,OAAR,GAAkB,CAA9B;AACA,gBAAIoE,OAAO,KAAK5B,QAAL,CAAc/I,IAAd,CAAmB;AAAA,uBAAKyK,EAAElE,OAAF,KAAcgE,KAAnB;AAAA,aAAnB,CAAX;;AAEA,gBAAGI,QAAQA,KAAKpE,OAAL,KAAiBgE,KAA5B,EAAmC;AAC/BI,qBAAKpE,OAAL,GAAeC,QAAQD,OAAvB;AACAoE,qBAAKd,OAAL,GAAe,IAAf;AACArD,wBAAQD,OAAR,GAAkBgE,KAAlB;AACA/D,wBAAQqD,OAAR,GAAkB,IAAlB;;AAEA,qBAAKb,YAAL;AACH;AACJ;;2BAEDA,uCAAe;AACX,gBAAI,KAAKD,QAAT,EAAmB;AACf,qBAAKwC,cAAL,GAAsB,KAAKxC,QAAL,CACjBR,MADiB,CACV,UAASC,IAAT,EAAe;AACnB,2BAAOA,KAAKsC,SAAL,KAAmB,IAA1B;AACH,iBAHiB,EAIjBpC,KAJiB,CAIX,CAJW,EAKjBN,IALiB,CAKZ,UAACO,CAAD,EAAIC,CAAJ,EAAU;AACZ,2BAAQD,EAAE,SAAF,IAAeC,EAAE,SAAF,CAAvB;AACH,iBAPiB,CAAtB;AAQH;AACJ;;2BAGDtD,+BAAW;AAAA;;AACP,gBAAIkG,qBAAqB,eAAzB;AACA,gBAAIC,uBAAuB,iBAA3B;AACA,gBAAIC,sBAAsB,cAA1B;;AAEA,iBAAK3G,aAAL,CAAmBQ,IAAnB,CACI,KAAK9F,eAAL,CAAqB+F,SAArB,CAA+B,KAAKyC,UAAL,CAAgBzF,OAAhB,CAAwBmJ,GAAxB,GAA4B,aAA3D,EAA0E;AAAA,uBAAQ,OAAK3G,SAAL,CAAeuE,IAAf,CAAR;AAAA,aAA1E,CADJ;;AAGA,iBAAKxE,aAAL,CAAmBQ,IAAnB,CACI,KAAK9F,eAAL,CAAqB+F,SAArB,CAA+B,KAAKyC,UAAL,CAAgBzF,OAAhB,CAAwBmJ,GAAxB,GAA4B,cAA3D,EAA2E;AAAA,uBAAQ,OAAK1G,UAAL,CAAgBsE,IAAhB,CAAR;AAAA,aAA3E,CADJ;;AAGA,iBAAKxE,aAAL,CAAmBQ,IAAnB,CACI,KAAK9F,eAAL,CAAqB+F,SAArB,CAA+B,KAAKyC,UAAL,CAAgBzF,OAAhB,CAAwBmJ,GAAxB,GAA4B,eAA3D,EAA4E;AAAA,uBAAQ,OAAKvE,WAAL,CAAiBmC,IAAjB,CAAR;AAAA,aAA5E,CADJ;;AAGA,iBAAKxE,aAAL,CAAmBQ,IAAnB,CACI,KAAK9F,eAAL,CAAqB+F,SAArB,CAA+BgG,kBAA/B,EAAmD;AAAA,uBAAS,OAAKlB,WAAL,CAAiBjB,KAAjB,CAAT;AAAA,aAAnD,CADJ;;AAGA,iBAAKtE,aAAL,CAAmBQ,IAAnB,CACI,KAAK9F,eAAL,CAAqB+F,SAArB,CAA+BiG,oBAA/B,EAAqD;AAAA,uBAAS,OAAKf,aAAL,CAAmBrB,KAAnB,CAAT;AAAA,aAArD,CADJ;;AAGA,iBAAKtE,aAAL,CAAmBQ,IAAnB,CACI,KAAK9F,eAAL,CAAqB+F,SAArB,CAA+BkG,mBAA/B,EAAoD;AAAA,uBAAS,OAAKtD,IAAL,EAAT;AAAA,aAApD,CADJ;AAEH;;2BAED3C,+BAAW;AACP,iBAAKV,aAAL,CAAmBW,OAAnB,CAA2B,UAAUC,YAAV,EAAwB;AAC/CA,6BAAaC,OAAb;AACH,aAFD;AAGH;;;;;;;;;;;;;;;;;;;;;QC7SQrD,qBAAAA,qBADZ,8DAAuB,UAAvB;AAGG,4BAAayF,cAAb,EAA6BvL,QAA7B,EAAuC;AAAA;;AAEnC,iBAAKuL,cAAL,GAAsBA,cAAtB;AACA,iBAAKvL,QAAL,GAAgBA,QAAhB;AACA,iBAAK+F,OAAL,GAAe,KAAK/F,QAAL,CAAcsD,iBAAd,EAAf;AACA,iBAAK6L,KAAL,GAAa,EAAb;;AAEA,iBAAK7F,IAAL,GAAY;AACRjB,0BAAS,KADD;AAERtC,yBAAS,KAAKA,OAFN;AAGRqJ,6BAAa;AAHL,aAAZ;;AAMA,iBAAKC,cAAL,CAAoB,KAAKtJ,OAAL,CAAapC,SAAjC;AACH;;6BAED0L,yCAAe1L,WAAW;AAAA;;AACtB,iBAAK4H,cAAL,CAAoBlB,aAApB,CAAkC1G,SAAlC,EACKtB,IADL,CACU,sBAAc;AAChB,sBAAKiH,IAAL,CAAUgG,KAAV,GAAkBC,UAAlB;AACA,sBAAKJ,KAAL,CAAWrG,IAAX,CAAgB,MAAKQ,IAArB;AACH,aAJL;AAKH;;6BAEDpJ,2CAAgBC,QAAQC,QAAQ;AAC5BD,mBAAOE,KAAP,GAAe,KAAK0F,OAAL,CAAayJ,KAA5B;;AAGArP,mBAAOO,GAAP,CAAW,CACP,EAAEC,OAAO,CAAC,EAAD,EAAK,WAAL,EAAkB,oBAAlB,CAAT,EAAkDC,UAAU,YAA5D,EAA0EC,MAAK,UAA/E,EADO,CAAX;;AAIA,iBAAKT,MAAL,GAAcA,MAAd;AACH;;6BAEDqM,yCAAelC,aAAa;AACxB,gBAAI,KAAKjB,IAAL,IAAa,KAAKA,IAAL,CAAUgG,KAA3B,EAAkC;AAC9B,qBAAKhG,IAAL,CAAUgG,KAAV,CAAgBrG,OAAhB,CAAwB,UAAS8C,IAAT,EAAe;AACnCA,yBAAK0D,QAAL,GAAgB1D,KAAKtI,GAAL,KAAa8G,WAA7B;AACH,iBAFD;AAGH;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QC7CQmF,uBAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCGAC,uBAAAA,uBADZ;AAIG,8BAAY3M,eAAZ,EAA6B;AAAA;;AAAA;;AACzB,iBAAKA,eAAL,GAAuBA,eAAvB;AACA,iBAAKsF,aAAL,GAAqB,EAArB;AACA,iBAAKyG,kBAAL,GAA0B,eAA1B;AACA,iBAAKC,oBAAL,GAA4B,iBAA5B;AACH;;+BAEDY,qCAAajH,UAAUC,UAAU,CAQhC;;+BAEDiH,uCAAgB;AACZ,iBAAKjD,KAAL,CAAWC,SAAX,GAAuB,IAAvB;AACH;;+BAEDiD,yCAAiB;AACb,iBAAKlD,KAAL,CAAW6B,UAAX,GAAwB,IAAxB;AACH;;+BAGDsB,yCAAgB;AACZ,iBAAKnD,KAAL,CAAWC,SAAX,GAAuB,KAAvB;AACA,iBAAKD,KAAL,CAAW6B,UAAX,GAAwB,KAAxB;AACH;;+BAEDlB,+BAAW;AACP,gBAAI,KAAKX,KAAL,CAAWoD,SAAX,KAAyB,QAA7B,EAAuC;AACnC,qBAAKpD,KAAL,CAAWY,KAAX,GAAmB,KAAnB;AACA,qBAAKZ,KAAL,CAAWC,SAAX,GAAuB,IAAvB;AACH;AACJ;;+BAEDoD,qCAAc;AACV,iBAAKrD,KAAL,CAAWZ,OAAX,GAAqB,IAArB;AACA,iBAAKY,KAAL,CAAW6B,UAAX,GAAwB,KAAxB;;AAEA,gBAAIQ,sBAAsB,cAA1B;AACA,iBAAKjM,eAAL,CAAqBkB,OAArB,CAA6B+K,mBAA7B,EAAkD,KAAKrC,KAAvD;AACH;;+BAEDnE,uCAAe;AACX,gBAAG,KAAKyH,cAAL,EAAH,EAA0B;AACtB,oBAAIC,UAAU,mBAAmB,KAAKvD,KAAL,CAAW4B,OAA5C;AACA,qBAAKxL,eAAL,CAAqBkB,OAArB,CAA6BiM,OAA7B,EAAsC,IAAtC;AACH,aAHD,MAGO;AACH,qBAAKvD,KAAL,CAAWC,SAAX,GAAuB,KAAvB;AACH;AACJ;;+BAEDqD,2CAAiB;AACb,mBAAO,KAAKtD,KAAL,CAAW0C,KAAX,IACA,KAAK1C,KAAL,CAAWoD,SAAX,KAAyB,OADzB,IAEA,KAAKpD,KAAL,CAAWoD,SAAX,KAAyB,aAFhC;AAGH;;+BAEDI,2BAAS;AACL,iBAAKpN,eAAL,CAAqBkB,OAArB,CAA6B,KAAK6K,kBAAlC,EAAsD,KAAKnC,KAA3D;AACH;;+BAEDyD,+BAAW;AACP,iBAAKrN,eAAL,CAAqBkB,OAArB,CAA6B,KAAK8K,oBAAlC,EAAwD,KAAKpC,KAA7D;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCzEQ0D,uBAAAA,yBAGT,wBAAc;AAAA;;AAAA;;AACV,aAAKC,YAAL,GAAoB,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,CAApB;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCDQC,qBAAAA,qBADZ;AAIG,4BAAYxN,eAAZ,EAA6ByN,YAA7B,EAA2C;AAAA;;AAAA;;AACvC,iBAAKzN,eAAL,GAAuBA,eAAvB;AACA,iBAAKyN,YAAL,GAAoBA,YAApB;AACA,iBAAKC,aAAL,GAAqB,EAArB;AACA,iBAAKpI,aAAL,GAAqB,EAArB;AACA,iBAAKqI,KAAL,GAAa,EAAb;AACA,iBAAKC,UAAL,GAAkB,KAAlB;AACH;;6BACDhB,qCAAajH,UAAUC,UAAU;AAC7B,gBAAI,KAAKiI,YAAL,EAAJ,EAAyB;AACrB,qBAAK9H,SAAL;AACH;AACJ;;6BAEDA,iCAAY;AAAA;;AACR,gBAAI,KAAK6H,UAAL,KAAoB,IAAxB,EAA8B;AAC1B,qBAAKT,OAAL,GAAe,mBAAmB,KAAKvD,KAAL,CAAW4B,OAA7C;AACA,qBAAKlG,aAAL,CAAmBQ,IAAnB,CAAwB,KAAK9F,eAAL,CAAqB+F,SAArB,CAA+B,KAAKoH,OAApC,EAA6C;AAAA,2BAAU,MAAKW,WAAL,CAAiB7L,MAAjB,CAAV;AAAA,iBAA7C,CAAxB;AACA,qBAAK2L,UAAL,GAAkB,IAAlB;AACH;AACJ;;6BAEDE,mCAAY7L,QAAQ;AAAA;;AAChB,gBAAI,KAAK4L,YAAL,EAAJ,EAAyB;;AAErB,oBAAI,KAAKH,aAAL,CAAmBvL,MAAnB,GAA4B,CAAhC,EAAmC;AAAA;AAC/B,4BAAI4L,SAAS,IAAIC,UAAJ,EAAb;AACA,4BAAIC,OAAO,OAAKP,aAAL,CAAmB3E,IAAnB,CAAwB,CAAxB,CAAX;AACA,4BAAImB,aAAJ;AACA6D,+BAAOG,gBAAP,CAAwB,SAAxB,EAAmC,YAAW;AAC1C,gCAAIH,OAAOI,UAAP,KAAsB,CAA1B,EAA6B;AACzBjE,qCAAKuD,YAAL,CAAkBzF,IAAlB,CAAuBiG,KAAKpQ,IAA5B,EAAkCkQ,OAAO3L,MAAzC,EACK/C,IADL,CACU,mBAAW;AACb6K,yCAAKN,KAAL,CAAWwE,QAAX,GAAsBC,QAAQD,QAA9B;AACAlE,yCAAKN,KAAL,CAAWC,SAAX,GAAuB,KAAvB;AACH,iCAJL;AAKH;AACJ,yBARD;AASAkE,+BAAOO,aAAP,CAAqBL,IAArB;AAb+B;AAelC;AACJ;AACJ;;6BAEDJ,uCAAe;AACX,mBAAO,KAAKjE,KAAL,CAAWoD,SAAX,KAAyB,OAAhC;AACH;;6BAEDuB,+BAAUC,MAAM;AACZ,iBAAKzI,SAAL;AACA,mBAAO0I,IAAIC,eAAJ,CAAoBF,IAApB,CAAP;AACH;;;;;;;;QAIQG,kCAAAA;;;;;0CACTC,yBAAOJ,MAAM;AACT,iBAAKJ,QAAL,GAAgBK,IAAIC,eAAJ,CAAoBF,IAApB,CAAhB;AACA,mBAAO,KAAKJ,QAAZ;AACH;;;;;QAGQS,wCAAAA;;;;;gDACTD,yBAAOE,UAAU;AACb,gBAAIC,QAAQ,EAAZ;AACA,gBAAI,CAACD,QAAL,EAAe;AACX,uBAAOC,KAAP;AACH;AACD,iBAAI,IAAItQ,IAAI,CAAZ,EAAeA,IAAIqQ,SAAS3M,MAA5B,EAAoC1D,GAApC,EAAyC;AACrCsQ,sBAAMjJ,IAAN,CAAWgJ,SAAS/F,IAAT,CAActK,CAAd,CAAX;AACH;AACD,mBAAOsQ,KAAP;AACH;;;;;;;;;;;YCjFWlQ,YAAAA;AAAT,aAASA,SAAT,CAAmB1B,MAAnB,EAA2B;AAC9BA,eAAO+H,eAAP,CACI,iBADJ,EAEI,iBAFJ,EAGI,mBAHJ,EAII,eAJJ,EAKI,sBALJ,EAMI,iBANJ,EAOI,aAPJ;AASH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCRY8J,mBAAAA,qBAGT,oBAAe;AAAA;;AAAA;;AACX,aAAKC,UAAL,GAAkB,CAAC,SAAD,EAAW,OAAX,EAAmB,aAAnB,EAAiC,WAAjC,CAAlB;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCFQC,2BAAAA,2BADZ;AAIG,kCAAYlP,eAAZ,EAA6B;AAAA;;AAAA;;AACzB,iBAAKA,eAAL,GAAuBA,eAAvB;AACA,iBAAKsF,aAAL,GAAqB,EAArB;AACA,iBAAKsI,UAAL,GAAkB,KAAlB;AACH;;mCAEDhB,qCAAajH,UAAUC,UAAU;AAC7B,gBAAG,KAAKiI,YAAL,EAAH,EAAwB;AACpB,qBAAK9H,SAAL;AACH;AACJ;;mCAEDA,iCAAY;AAAA;;AACR,iBAAKoH,OAAL,GAAe,mBAAmB,KAAKvD,KAAL,CAAW4B,OAA7C;AACA,iBAAKlG,aAAL,CAAmBQ,IAAnB,CAAwB,KAAK9F,eAAL,CAAqB+F,SAArB,CAA+B,KAAKoH,OAApC,EAA6C;AAAA,uBAAU,MAAKW,WAAL,CAAiB7L,MAAjB,CAAV;AAAA,aAA7C,CAAxB;AACA,iBAAK2L,UAAL,GAAkB,IAAlB;AACH;;mCAEDE,mCAAY7L,QAAQ;AAAA;;AAChB,gBAAG,KAAK4L,YAAL,EAAH,EAAwB;AAAA;AACpB,wBAAIjE,QAAQ,OAAKA,KAAjB;AACA,wBAAI0C,QAAQ,EAAZ;;AAEA,wBAAId,UAAU,OAAK5B,KAAL,CAAW4B,OAAzB;AACA,wBAAI2D,QAAQ,CAAZ;;AAEA,2BAAKvF,KAAL,CAAWwF,KAAX,CAAiBnJ,OAAjB,CAAyB,UAAS8C,IAAT,EAAe;AACpC,4BAAIlE,KAAK2G,UAAU,GAAV,GAAgB2D,KAAzB;AACA7C,8BAAMxG,IAAN,CAAW,4BAAMjB,EAAN,EAAYwK,GAAZ,EAAX;AACAF;AACH,qBAJD;;AAMAvF,0BAAMwF,KAAN,GAAc9C,KAAd;;AAEA1C,0BAAMC,SAAN,GAAkB,KAAlB;AAfoB;AAgBvB;AACJ;;mCAEDyF,mCAAa;AACT,gBAAG,KAAKzB,YAAL,EAAH,EAAwB;AACpB,oBAAI,CAAC,KAAKjE,KAAL,CAAW0C,KAAhB,EAAuB;AACnB,yBAAK1C,KAAL,CAAW0C,KAAX,GAAmB,EAAnB;AACA,wBAAI,KAAKsB,UAAL,KAAoB,IAAxB,EAA8B;AAC1B,6BAAK7H,SAAL;AACH;AACJ;AACD,qBAAK6D,KAAL,CAAWwF,KAAX,CAAiBtJ,IAAjB,CAAsB,EAAtB;AACH;AACJ;;mCAEDyJ,iCAAWC,KAAK;AACZ,gBAAG,KAAK3B,YAAL,EAAH,EAAwB;AACpB,qBAAKjE,KAAL,CAAW0C,KAAX,CAAiBmD,MAAjB,CAAwBD,GAAxB,EAA6B,CAA7B;AACH;AACJ;;mCAEDxJ,+BAAW;AACP,iBAAKV,aAAL,CAAmBW,OAAnB,CAA2B,UAAUC,YAAV,EAAwB;AAC/CA,6BAAaC,OAAb;AACH,aAFD;AAGH;;mCAED0H,uCAAe;AACX,mBAAO,KAAKjE,KAAL,CAAWoD,SAAX,KAAyB,aAAhC;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCtEQ0C,yBAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCCAC,mBAAAA;AAGT,4BAAc;AAAA;;AAAA;AACb;;2BAEDC,6CAAiBjK,UAAUC,UAAU;AACjC,iBAAKiK,IAAL,CAAUlK,QAAV;AACH;;2BAEDmK,qCAAaC,MAAM,CAElB;;2BAEDF,qBAAK3Q,WAAW;;AAEZ8Q,qBAASC,eAAT,CAAyB,YAAW;AAIhC,oBAAIC,QAAQF,SAASG,KAAT,EAAZ;;AAEA,oBAAIC,QAAQJ,SAASD,IAAT,CAAcK,KAAd,EAAZ;AACAA,sBAAMC,OAAN,CAAc,CACV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CADU,EAEV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAFU,EAGV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAHU,EAIV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAJU,EAKV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CALU,EAMV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CANU,EAOV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAPU,EAQV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CARU,EASV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CATU,EAUV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAVU,EAWV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAXU,EAYV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAZU,EAaV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAbU,EAcV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAdU,EAeV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAfU,EAgBV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAhBU,EAiBV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAjBU,EAkBV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAlBU,EAmBV,CAAC,qBAAD,EAAwB,QAAxB,EAAkC,QAAlC,EAA4C,QAA5C,EAAsD,QAAtD,CAnBU,CAAd;;AAuBA,oBAAIC,UAAUF,MAAMG,KAAN,EAAd;AACAD,wBAAQE,QAAR,CAAiB,MAAjB,EAAyB,CAAzB,EAA4B,OAA5B;AACAF,wBAAQE,QAAR,CAAiB,MAAjB,EAAyB,CAAzB,EAA4B,KAA5B;AACAF,wBAAQE,QAAR,CAAiB,KAAjB,EAAwB,CAAxB,EAA2B,KAA3B;AACAF,wBAAQE,QAAR,CAAiB,OAAjB,EAA0B,CAA1B,EAA6B,MAA7B;AACAF,wBAAQE,QAAR,CAAiB,OAAjB,EAA0B,CAA1B,EAA6B,MAA7B;;AAGAN,sBAAMO,IAAN,CAAW,CAAX,EAAcC,IAAd,CAAmBJ,OAAnB,EAA4BzS,IAA5B,CAAiC,YAAjC;;AAuBAqS,sBAAM7S,KAAN,CAAY,uBAAZ;;AAEA6S,sBAAMhR,SAAN,CAAgBA,SAAhB;AACAgR,sBAAML,IAAN;AAEH,aAlED;AAmEH;;;;;;mBAlFqB;;;;ACJ1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1ZA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA","file":"app-bundle.js","sourcesContent":["import {inject} from \"aurelia-framework\";\r\nimport {RedirectToRoute } from 'aurelia-router';\r\n\r\n@inject(\"Settings\")\r\nexport class App {\r\n\r\n    constructor(settings) {\r\n        this.homePage = settings.homePage;\r\n    }\r\n\r\n    configureRouter(config, router) {\r\n\r\n        config.title = 'Dream Space';\r\n        config.options.pushState = true;\r\n\r\n        this.router = router;\r\n        config.addPipelineStep('authorize', AuthorizeStep);\r\n        config.map([\r\n            { route: [\"account\"], moduleId: \"account/navigation\", name:\"account\", title: \"Login\", nav: false },\r\n            { route: [\"strategies\"], moduleId: \"strategies/navigation\", name:\"strategies\", title: \"Strategies\", auth: true , nav:true },\r\n            { route: [\"studies\"], moduleId: \"studies/navigation\", name:\"studies\", title: \"Studies\", nav:true },\r\n            { route: '', redirect: this.homePage }\r\n\r\n        ]);\r\n\r\n    }\r\n}\r\n\r\n\r\n@inject(\"User\", \"Settings\")\r\nclass AuthorizeStep {\r\n\r\n    constructor(userContext, settings) {\r\n        this.isAuthenticated = userContext.user.isAuthenticated;\r\n        this.homePage = settings.homePage;\r\n    }\r\n\r\n    run(navigationInstruction, next) {\r\n        if (navigationInstruction.getAllInstructions().some(i => i.config.auth)) {\r\n\r\n            if (this.isAuthenticated) {\r\n                return next();\r\n            } else {\r\n                return next.cancel(new RedirectToRoute('account'));\r\n            }\r\n        } else {\r\n            if (navigationInstruction.getAllInstructions()\r\n                .some(i => i.config.name === 'account-login' && this.isAuthenticated)) {\r\n                return next.cancel(new RedirectToRoute(this.homePage));\r\n            }\r\n            return next();\r\n        }\r\n    }\r\n\r\n}","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\nimport {Settings} from './settings';\nimport {UserContext} from './account/user-context';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n\n    let userContext = aurelia.container.get(UserContext);\n    let settings = aurelia.container.get(Settings);\n\n    userContext.initialize()\n        .then(response => {\n\n            settings.initialize()\n                .then(response => {\n                    aurelia.use\n                        .instance('Settings',settings)\n                        .instance('User',userContext)\n                        .standardConfiguration()\n                        .feature('resources')\n                        .feature('navigation')\r\n                        .plugin('aurelia-validation');\r\n\n                    if (environment.debug) {\n                        aurelia.use.developmentLogging();\n                    }\n\n                    if (environment.testing) {\n                        aurelia.use.plugin('aurelia-testing');\n                    }\n\n                    aurelia.start().then(() => {\n                        aurelia.setRoot();\n                    });\n\n                });\n\n            \n        });\n\n}\n","\nimport {inject} from \"aurelia-framework\";\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\n\r\n@inject(HttpClient)\r\nexport class Settings {\r\n\r\n    constructor (httpClient, eventAggregator) {\r\n        httpClient.configure(config => {\r\n            config\r\n                .useStandardConfiguration()\r\n                .withBaseUrl('api/');\r\n\r\n        });\r\n\r\n        this.sections = [];\r\n        this.http = httpClient;\r\n        this.initialized = false;\n        this.homePage = 'studies';\n    }\r\n    \r\n\r\n    getStudiesSection() {\r\n        if (this.initialized === true) {\r\n            return this.sections.find(s => s.url === \"studies\");\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getSection(sectionId) {\r\n        if (this.initialized === true) {\r\n            return this.sections.find(s => s.sectionId === sectionId);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    initialize() {\r\n        return this.http.fetch(\"article/sections\")\r\n            .then(response => {\r\n                response.json()\r\n                .then(sections => {\r\n                        this.sections = sections;\r\n                        this.initialized = true;\r\n                });\r\n\r\n                return this;\r\n            })\r\n            .catch(error => {\r\n                return this.handleError(error);\r\n            });\r\n    }\r\n\r\n\r\n\r\n    handleError(error) {\r\n        this.eventAggregator.publish('GeneralExceptions', error);\r\n        return error;\r\n    }\r\n}","import {inject} from \"aurelia-framework\";\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\nimport {ValidationRules, ValidationController, validateTrigger} from \"aurelia-validation\"\r\nimport {BootstrapFormRenderer} from \"../common/bootstrap-form-renderer\"\r\n\r\n@inject(\"User\", EventAggregator, ValidationController)\r\nexport class Edit {\r\n    \r\n    constructor(userContext, eventAggregator, validation) {\r\n        this.userContext = userContext;\r\n        this.eventAggregator = eventAggregator;\r\n        this.user = this.userContext.user;\r\n        \r\n        this.validation = validation;\r\n        this.validation.validateTrigger = validateTrigger.change;\r\n        this.validation.addRenderer(new BootstrapFormRenderer());\r\n\r\n        ValidationRules\r\n            .ensure(u => u.firstName)\r\n            .required()\r\n            .minLength(3)\r\n            .on(this.user);\r\n    }\r\n\r\n    activate(params, routeConfig, navigationInstruction) {\r\n        this.router = navigationInstruction.router;\r\n    }\r\n\r\n    update() {\r\n        if (this.validation.errors && this.validation.errors.length > 0) {\r\n            return;\r\n        }\r\n\r\n        this.userContext.update(this.user)\r\n            .then(result => {\r\n                if (result === 0) {\r\n                    this.router.navigate(\"view\");\r\n                }\r\n            })\r\n        .catch(error => {\r\n            return this.handleError(error);\r\n        });\r\n    \r\n    }\r\n\r\n    handleError(error) {\r\n        this.eventAggregator.publish('GeneralExceptions', error);\r\n    }\r\n}","import {inject,bindable} from \"aurelia-framework\";\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\n\n@inject(\"User\", EventAggregator)\r\nexport class Login {\r\n\r\n    constructor(userContext, eventAggregator ) {\r\n        this.userContext = userContext;\r\n        this.eventAggregator = eventAggregator;\r\n\r\n        this.username = '';\r\n        this.password = '';\r\n    }\r\n\r\n    activate(params, routeConfig, navigationInstruction) {\r\n        this.router = navigationInstruction.router;\r\n    }\r\n\r\n    login() {\r\n        this.userContext.login(this.username, this.password)\r\n            .then(result => {\r\n                if (result === 0) {\r\n                    let url = this.router.generate(\"strategies\");\r\n                    window.location.href = url;\r\n                }\r\n            })\r\n        .catch(error => {\r\n            return this.handleError(error);\r\n        });\r\n    }\r\n\r\n    handleError(error) {\r\n        this.eventAggregator.publish('GeneralExceptions', error);\r\n    }\r\n}","\r\nexport class Navigation {\r\n\r\n    configureRouter(config, router) {\r\n        config.title = 'Login';\r\n\r\n        config.map([\r\n            { route: ['', 'login'], moduleId: \"./login\", name: \"account-login\", title: \"Login\", nav: false },\r\n            { route: ['edit'], moduleId: \"./edit\", name: \"account-edit\", title: \"Edit Profile\", nav: true, auth: true },\r\n            { route: ['view'], moduleId: \"./view\", name: \"account-view\", title: \"View Profile\", nav: true, auth: true }\r\n        ]);\r\n\r\n        this.router = router;\r\n        this.section = config.title;\r\n    }\r\n}\r\n\r\n","import {inject} from \"aurelia-framework\";\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\n\r\n@inject(HttpClient, EventAggregator)\r\nexport class UserContext {\r\n\r\n    constructor (httpClient, eventAggregator) {\r\n        httpClient.configure(config => {\r\n            config\r\n                .useStandardConfiguration()\r\n                .withBaseUrl('api/');\r\n\r\n        });\r\n\r\n        this.http = httpClient;\r\n        this.eventAggregator = eventAggregator;\r\n        this.user = {};\r\n    }\r\n\r\n\r\n    initialize() {\r\n        return this.http.fetch(\"account/user\")\r\n            .then(response => {\r\n                return response.json().then(user => {\r\n                    this.user = user;\r\n                });\r\n            })\r\n            .catch(error => {\r\n                this.handleError(error);\r\n            });\r\n    }\r\n\r\n\r\n    login(username, password) {\r\n        let loginRequest = {\r\n            Email: username,\r\n            Password: password,\r\n            RememberMe: true\r\n        };\r\n\r\n        return this.http.fetch(\"account/login\",\r\n            {\r\n                method: 'post',\r\n                body: json(loginRequest)\r\n            })\r\n            .then(response => {\r\n                return response.json()\r\n                    .then(result => {\r\n                        if (result.status === 0) {\r\n                            this.user = result.user;\r\n                        }\r\n                        return result.status;\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return this.handleError(error);\r\n            });\r\n    }\r\n\r\n    update(user) {\r\n        let updateRequest = {\r\n            Username : user.username,\r\n            FirstName: user.firstName\r\n        };\r\n\r\n        return this.http.fetch(\"account/update\",\r\n            {\r\n                method: 'put',\r\n                body: json(updateRequest)\r\n            })\r\n            .then(response => {\r\n                return response.json()\r\n                    .then(result => {\r\n                        if (result.status === 0) {\r\n                            this.user = result.user;\r\n                        }\r\n                        return result.status;\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return this.handleError(error);\r\n            });\r\n    }\r\n\r\n    handleError(error) {\r\n        this.eventAggregator.publish('GeneralExceptions', error);\r\n    }\r\n}","\r\nimport {inject} from \"aurelia-framework\";\r\n\r\n@inject(\"User\")\r\nexport class View {\r\n\r\n    constructor(userContext) {\r\n        this.user = userContext.user;\r\n    }\r\n\r\n    activate(params, routeConfig, navigationInstruction) {\r\n        this.router = navigationInstruction.router;\r\n    }\r\n\r\n\r\n    edit() {\r\n        this.router.navigate(\"edit\");\r\n    }\r\n}","import {ValidationRenderer, RenderInstruction, ValidationError} from \"aurelia-validation\"\r\n\r\nexport class BootstrapFormRenderer {\n    render(instruction) {\n        for (let { error, elements } of instruction.unrender) {\n            for (let element of elements) {\n                this.remove(element, error);\n            }\n        }\n\n    for (let { error, elements } of instruction.render) {\n        for (let element of elements) {\n            this.add(element, error);\n        }\n    }\n}\n\nadd(element, error) {\n    const formGroup = element.closest('.form-group');\n    if (!formGroup) {\n        return;\n    }\n\n    // add the has-error class to the enclosing form-group div\n    formGroup.classList.add('has-error');\n\n    // add help-block\n    const message = document.createElement('span');\n    message.className = 'help-block validation-message';\n    message.textContent = error.message;\n    message.id = `validation-message-${error.id}`;\n    formGroup.appendChild(message);\n}\n\nremove(element, error) {\n    const formGroup = element.closest('.form-group');\n    if (!formGroup) {\n        return;\n    }\n\n    // remove help-block\n    const message = formGroup.querySelector(`#validation-message-${error.id}`);\n    if (message) {\n        formGroup.removeChild(message);\n\n        // remove the has-error class from the enclosing form-group div\n        if (formGroup.querySelectorAll('.help-block.validation-message').length === 0) {\n            formGroup.classList.remove('has-error');\n        }\n    }\n}\n}\n","export function configure(config) {\r\n    config.globalResources(\r\n        './main-menu',\r\n        './sub-menu',\r\n        './sub-nav'\r\n    );\r\n}","import {bindable} from \"aurelia-framework\";\r\n\r\nexport class MainMenu {\r\n    @bindable router = null;\r\n\r\n    constructor() {\r\n    }\r\n}","import {bindable, inject} from \"aurelia-framework\";\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\n\r\n@inject(EventAggregator)\r\nexport class SubMenu {\r\n    @bindable router;\r\n    @bindable section;\r\n\r\n    constructor (eventAggregator) {\r\n        this.editMode = false;\r\n        this.eventAggregator = eventAggregator;\r\n        this.subscriptions = [];\r\n    }\r\n\r\n    startEdit() {\r\n        this.editMode = true;\r\n        this.eventAggregator.publish(this.section + '-edit-mode', this.editMode);\r\n    }\r\n\r\n    cancelEdit() {\r\n        this.editMode = false;\r\n        this.eventAggregator.publish(this.section + '-edit-mode', this.editMode);\r\n    }\r\n\r\n    applyChanges() {\r\n        this.eventAggregator.publish(this.section + '-save', true);\r\n    }\r\n\r\n    sectionChanged(newValue, oldValue) {\r\n        this.section = newValue;\r\n    }\r\n\r\n    attached() {\r\n        this.subscriptions.push(\r\n            this.eventAggregator.subscribe(this.section + '-cancel-edit', flag => this.cancelEdit()));\r\n    }\r\n\r\n    detached() {\r\n        this.subscriptions.forEach(function (subscription) {\r\n            subscription.dispose();\r\n        });\r\n    }\r\n\r\n}","import {inject} from \"aurelia-framework\";\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\n\r\n@inject(EventAggregator)\r\nexport class SubNav {\r\n\r\n    constructor (eventAggregator) {\r\n        this.eventAggregator = eventAggregator;\r\n        this.categoriesUrl = '';\r\n    }\r\n\r\n    activate(menu) {\r\n        this.menu = menu;\r\n        this.categoriesUrl = this.menu.section.url + '/categories/' +  this.menu.section.sectionId;\r\n    }\r\n\r\n    getUrl(menuItem) {\r\n        return '' + this.menu.section.url + '/' + menuItem.url;\r\n    }\r\n\r\n    startEdit() {\r\n        this.eventAggregator.publish(this.menu.section.url + '-start-edit', true);\r\n    }\r\n\r\n    applyChanges() {\r\n        this.eventAggregator.publish(this.menu.section.url + '-save-article', true);\r\n    }\r\n\r\n    cancelEdit() {\r\n        this.eventAggregator.publish(this.menu.section.url + '-cancel-edit', true);\r\n    }\r\n}","export function configure(config) {\n  config.globalResources(['./elements/chart/any-chart']);\n  config.globalResources(\r\n    './elements/article/article-block',\r\n    './elements/article//heading-block',\r\n    './elements/article//paragraph-block',\r\n    './elements/article/image-block',\r\n    './elements/article/ordered-list-block',\r\n    './elements/article/block-actions',\r\n    './elements/article/new-block'\r\n);\n}\n","import {inject} from \"aurelia-framework\";\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\n\r\n@inject(HttpClient, EventAggregator)\r\nexport class ArticleService {\r\n\r\n    constructor (httpClient, eventAggregator) {\r\n        httpClient.configure(config => {\r\n            config\r\n                .useStandardConfiguration()\r\n                .withBaseUrl('api/');\r\n\r\n        });\r\n\r\n        this.http = httpClient;\r\n        this.eventAggregator = eventAggregator;\r\n    }\r\n\r\n\r\n    getArticle(id) {\r\n        return this.http.fetch(\"article/\"+id)\r\n            .then(response => {\r\n                return response.json();\r\n            })\r\n            .catch(error => {\r\n                return this.handleError(error);\r\n            });\r\n    }    \r\n    \r\n    deleteArticle(id) {\r\n        return this.http.fetch(\"article/\"+id, {method: 'delete'})\r\n            .then(response => {\r\n                return response.json();\r\n            })\r\n            .catch(error => {\r\n                return this.handleError(error);\r\n            });\r\n    }\r\n    \r\n    updateArticleOrder(articleId, orderId) {\r\n        let article = {\r\n            ArticleId: articleId,\r\n            OrderId: orderId\r\n        }\r\n\r\n        return this.http.fetch(\"article/\"+articleId+\"/order\", {method: 'put', body:json(article)})\r\n            .then(response => {\r\n                return response.json();\r\n            })\r\n            .catch(error => {\r\n                return this.handleError(error);\r\n            });\r\n    }\r\n\r\n    getArticleByUrl(categotyId, articleUrl) {\r\n        return this.http.fetch(\"article/url/\"+categotyId+\"/\"+articleUrl)\r\n            .then(response => {\r\n                return response.json();\r\n            })\r\n            .catch(error => {\r\n                return this.handleError(error);\r\n            });\r\n    }\r\n\r\n\r\n    getSection(url) {\r\n        return this.http.fetch(\"article/section/\"+url)\r\n            .then(response => {\r\n                return response.json();\r\n            })\r\n            .catch(error => {\r\n                return this.handleError(error);\r\n            });\r\n    }\r\n    \r\n    getCategories(sectionId) {\r\n\r\n        return this.http.fetch(\"article/categories/\"+sectionId)\r\n            .then(response => {\r\n                return response.json();\r\n            })\r\n            .catch(error => {\r\n                return this.handleError(error);\r\n            });\r\n    }\r\n\r\n    getCategory (categoryUrl) {\r\n        return this.http.fetch(\"article/category/\"+categoryUrl)\r\n            .then(response => {\r\n                return response.json();\r\n            })\r\n            .catch(error => {\r\n                return this.handleError(error);\r\n            });\r\n    }\r\n\r\n    getFeatured(categoryId) {\r\n        return this.http.fetch(\"article/\"+categoryId+\"/featured\")\r\n            .then(response => {\r\n                return response.json();\r\n            })\r\n            .catch(error => {\r\n                return this.handleError(error);\r\n            });\r\n    }    \r\n\r\n    getArticles(categoryId) {\r\n        return this.http.fetch(\"article/\"+categoryId+\"/all\")\r\n            .then(response => {\r\n                return response.json();\r\n            })\r\n            .catch(error => {\r\n                return this.handleError(error);\r\n            });\r\n    }\r\n\r\n    saveArticle(article) {\r\n        return this.http.fetch('article', {\r\n            method: 'post',\r\n            body:json(article)\r\n        })\r\n        .then(response => response.json());\r\n    }\r\n\r\n    saveCategory(category) {\r\n        return this.http.fetch('article/category', {\r\n            method: 'post',\r\n            body:json(category)\r\n        })\r\n        .then(response => response.json());\r\n    }\r\n\r\n    deleteCategory(categoryId) {\r\n        return this.http.fetch('article/category/'+categoryId, {\r\n            method: 'delete'\r\n        })\r\n        .then(response => response.json());\r\n    }\r\n\r\n    handleError(error) {\r\n        this.eventAggregator.publish('GeneralExceptions', error);\r\n        return error;\r\n    }\r\n}","import {inject} from \"aurelia-framework\";\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\n\r\n@inject(HttpClient)\r\nexport class BlobServices {\r\n    \r\n\r\n    constructor (http) {\r\n        http.configure(config => {\r\n            config\r\n                .useStandardConfiguration()\r\n                .withBaseUrl('api/');\r\n\r\n        });\r\n\r\n        this.http = http;\r\n    }\r\n\r\n    \r\n    post(fileName, fileBody) {\r\n        let payload = {\r\n            fileName: fileName,\r\n            fileBody: fileBody\r\n        };\r\n\r\n        return this.http.fetch('blob', {\r\n            method: 'post',\r\n            body:json(payload)\r\n            })\r\n        .then(response => response.json());\r\n    }\r\n}","export class Create {\r\n}","export class List {\r\n}","export class Navigation {\r\n\r\n    configureRouter(config, router) {\r\n        config.title = 'Strategies';\r\n\r\n\r\n        config.map([\r\n            { route: ['','list'], moduleId: \"./list\", name:\"list\", title: \"Strategies\", nav:true },\r\n            { route: ['create'], moduleId: \"./create\", name:\"create\", title: \"Create New Strategy\", nav:true }\r\n        ]);\r\n\r\n        this.router = router;\r\n        this.section = config.title;\r\n    }\r\n}","import {inject} from \"aurelia-framework\";\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\nimport {ArticleService} from '../services/article-service';\r\nimport {Navigation} from './navigation'\r\n\r\n@inject(EventAggregator, ArticleService, Navigation)\r\nexport class Category {\r\n\r\n    constructor (eventAggregator, articleService, navigation) {\r\n\r\n        this.eventAggregator = eventAggregator;\r\n        this.articleService = articleService;\r\n        this.subscriptions = [];\r\n        this.editMode = false;\r\n        this.navigation = navigation;\r\n        this.article = {};\r\n    }\r\n\r\n    activate(params, routeconfig) {\r\n        this.articleUrl = \"default\";\r\n\r\n        if (!params.category) {\r\n            params.category = \"default\";\r\n        }\r\n        \r\n        if (params.article) {\r\n            this.articleUrl = params.article;\r\n        }\r\n\r\n        this.loadCategory(params.category);\r\n    }\r\n\r\n    sort() {\r\n        if (this.article.blocks) {\r\n            this.article.sortedBlocks = this.article.blocks\r\n                .filter(function(item) {\r\n                    return item.deleted !== true;\r\n                })\r\n                .slice(0)\r\n                .sort((a, b) => {\r\n                    return (a['orderId'] - b['orderId']);\r\n                });\r\n        }\r\n    }\r\n\r\n\r\n    loadArticle(categoryId, articleUrl) {\r\n\r\n        this.articleService.getArticleByUrl(categoryId, articleUrl)\r\n        .then(result => {\r\n            this.article = result;\r\n            this.sort();\r\n         });\r\n    }\r\n\r\n    loadArticles(categoryId) {\r\n        this.articleService.getArticles(categoryId)\r\n            .then(articles => {\r\n                this.articles = articles;\r\n                this.sortArticles();\r\n            });\r\n    }\r\n\r\n    loadCategory(categoryUrl) {\r\n        this.setEditMode(false);\r\n\r\n        this.articleService.getCategory(categoryUrl)\r\n            .then(category => {\r\n                this.category = category;\r\n\r\n                if (this.category && this.category.categoryId > 0) {\r\n                    this.navigation.selectMenuItem(category.url);\r\n\r\n                    this.loadArticle(this.category.categoryId, this.articleUrl);\r\n                    this.loadArticles(this.category.categoryId);\r\n                }\r\n            });\r\n    }\r\n\r\n    getArticleUrl(article) {\r\n        return '/' + this.navigation.section.url + '/' + this.category.url + '/' + article.url;\r\n    }\r\n\r\n    setEditMode (editMode) {\r\n        this.editMode = editMode;\r\n        this.navigation.menu.editMode = editMode;\r\n\r\n        if (this.article &&  this.article != null &&  this.article.blocks &&  this.article.blocks != null) {\r\n            this.article.Blocks.forEach(function(block) {\r\n                block.editMode = editMode;\r\n                if (editMode !== true) {\r\n                    block.isEditing = false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    startEdit(flag) {\r\n        this.originalArticle = Object.assign({}, this.article);\r\n        this.setEditMode(true);\r\n    }\r\n\r\n    cancelEdit(flag) {\r\n        this.article = this.originalArticle;\r\n        this.setEditMode(false);\r\n    }\r\n\r\n    saveArticle(flag) {\r\n        let isEditing = false;\r\n        let self = this;\r\n\r\n        this.article.Blocks.forEach(function(block) {\r\n            if (block.isEditing === true) {\r\n                isEditing = true;\r\n            }\r\n        });\r\n\r\n        if (isEditing !== true) {\r\n            this.articleService.saveArticle(this.article)\r\n                .then(response => {\r\n                    this.setEditMode(false);\r\n                });\r\n        } else {\r\n            alert(\"Some block are in edit mode. Apply changes to those blocks first.\");\r\n        }\r\n\r\n        if (this.articles) {\r\n            this.articles.forEach(function(article) {\r\n                if (article.changed === true) {\r\n                    if (article.IsDeleted) {\r\n                        self.removeArticle(article.articleId);\r\n                    } else {\r\n                        self.updateArticleOrder(article.articleId, article.orderId);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    addBlock() {\r\n        if (!this.article.blocks) {\r\n            this.article.blocks = [];\r\n        }\r\n        \r\n        let block = {\r\n            isNew: true,\r\n            BlockId: this.maxBlockId(this.article.blocks) + 1,\r\n            OrderId: this.maxOrderId(this.article.blocks) + 1,\r\n\r\n            Text: ''\r\n        };\r\n\r\n        this.article.blocks.push(block);\r\n        this.sort();\r\n    }\r\n\r\n    moveBlockUp(block) {\r\n        let order = block.orderId - 1;\r\n        let up = this.article.blocks.find(x => x.orderId === order);\r\n        if(up && up.orderId === order) {\r\n            up.orderId = block.orderId;\r\n            block.orderId = order;\r\n\r\n            this.sort();\r\n        }\r\n    }\r\n\r\n    moveBlockDown(block) {\r\n        let order = block.orderId + 1;\r\n        let down = this.article.blocks.find(x => x.orderId === order);\r\n        if(down && down.orderId === order) {\r\n            down.orderId = block.orderId;\r\n            block.orderId = order;\r\n\r\n            this.sort();\r\n        }\r\n    }\r\n\r\n    addArticle() {\r\n        this.article = {\r\n            articleId: 0,\r\n            categoryId: this.category.categoryId,\r\n            isFeatured: false,\r\n            isDeleted: false,\r\n            title: \"New Article\",\r\n            url: \"new-article\",\r\n            orderId: this.maxOrderId(this.articles) + 1,\r\n            blocks: []\r\n        };\r\n    }\r\n\r\n    maxOrderId(list) {\r\n        let max = 0;\r\n        list.forEach(function(item) {\r\n            if (max < item.orderId) {\r\n                max = item.orderId;\r\n            }\r\n        });\r\n        return max;\r\n    }\r\n\r\n    maxBlockId(list) {\r\n        let max = 0;\r\n        list.forEach(function(item) {\r\n            if (max < item.blockId) {\r\n                max = item.blockId;\r\n            }\r\n        });\r\n        return max;\r\n    }\r\n\r\n    deleteArticle(article) {\r\n        article.isDeleting = true;\r\n    }\r\n\r\n    cancelDeleteArticle(article) {\r\n        article.isDeleting = false;\r\n    }\r\n\r\n    confirmDeleteArticle(article) {\r\n        article.IsDeleted = true;\r\n    }    \r\n    \r\n    removeArticle(articleId) {\r\n        this.articleService.deleteArticle(articleId)\r\n            .then(response => {\r\n            });\r\n    }\r\n\r\n    updateArticleOrder(articleId, orderId) {\r\n        this.articleService.updateArticleOrder(articleId, orderId)\r\n            .then(response => {\r\n            });\r\n    }\r\n\r\n    moveUpArticle(article) {\r\n        let order = article.orderId - 1;\r\n        let up = this.articles.find(x => x.orderId === order);\r\n        \r\n        if(up && up.orderId === order) {\r\n            up.orderId = article.orderId;\r\n            up.changed = true;\r\n            article.orderId = order;\r\n            article.changed = true;\r\n\r\n            this.sortArticles();\r\n        }\r\n    }\r\n\r\n    moveDownArticle(article) {\r\n        let order = article.orderId + 1;\r\n        let down = this.articles.find(x => x.orderId === order);\r\n        \r\n        if(down && down.orderId === order) {\r\n            down.orderId = article.orderId;\r\n            down.changed = true;\r\n            article.orderId = order;\r\n            article.changed = true;\r\n        \r\n            this.sortArticles();\r\n        }\r\n    }\r\n\r\n    sortArticles() {\r\n        if (this.articles) {\r\n            this.sortedArticles = this.articles\r\n                .filter(function(item) {\r\n                    return item.isDeleted !== true;\r\n                })\r\n                .slice(0)\r\n                .sort((a, b) => {\r\n                    return (a['orderId'] - b['orderId']);\r\n                });\r\n        }\r\n    }\r\n\r\n\r\n    attached() {\r\n        let moveBlockUpChannel = 'move-block-up';\r\n        let moveBlockDownChannel = 'move-block-down';\r\n        let blockDeletedChannel = 'delete-block';\r\n\r\n        this.subscriptions.push(\r\n            this.eventAggregator.subscribe(this.navigation.section.Url+'-start-edit', flag => this.startEdit(flag)));\r\n\r\n        this.subscriptions.push(\r\n            this.eventAggregator.subscribe(this.navigation.section.Url+'-cancel-edit', flag => this.cancelEdit(flag)));\r\n\r\n        this.subscriptions.push(\r\n            this.eventAggregator.subscribe(this.navigation.section.Url+'-save-article', flag => this.saveArticle(flag)));\r\n\r\n        this.subscriptions.push(\r\n            this.eventAggregator.subscribe(moveBlockUpChannel, block => this.moveBlockUp(block)));\r\n\r\n        this.subscriptions.push(\r\n            this.eventAggregator.subscribe(moveBlockDownChannel, block => this.moveBlockDown(block)));\r\n\r\n        this.subscriptions.push(\r\n            this.eventAggregator.subscribe(blockDeletedChannel, block => this.sort()));\r\n    }\r\n\r\n    detached() {\r\n        this.subscriptions.forEach(function (subscription) {\r\n            subscription.dispose();\r\n        });\r\n    }\r\n}\r\n","import {inject} from \"aurelia-framework\";\r\nimport {ArticleService} from '../services/article-service';\r\n\r\n@inject(ArticleService, \"Settings\")\r\nexport class Navigation {\r\n\r\n    constructor (articleService, settings) {\r\n        \r\n        this.articleService = articleService;\r\n        this.settings = settings;\r\n        this.section = this.settings.getStudiesSection();\r\n        this.menus = [];\r\n        \r\n        this.menu = {\r\n            editMode:false,\r\n            section: this.section,\r\n            editModeUrl: ''\r\n        };\r\n\r\n        this.loadCategories(this.section.sectionId);\r\n    }\r\n\r\n    loadCategories(sectionId) {\r\n        this.articleService.getCategories(sectionId)\r\n            .then(categories => {\r\n                this.menu.items = categories;\r\n                this.menus.push(this.menu);\r\n            });\r\n    }\r\n\r\n    configureRouter(config, router) {\r\n        config.title = this.section.Title;\r\n        \r\n\r\n        config.map([\r\n            { route: ['', ':category', ':category/:article'], moduleId: \"./category\", name:\"category\"}\r\n        ]);\r\n\r\n        this.router = router;\r\n    }\r\n \r\n    selectMenuItem(categoryUrl) {\r\n        if (this.menu && this.menu.items) {\r\n            this.menu.items.forEach(function(item) {\r\n                item.isActive = item.url === categoryUrl;\r\n            });\r\n        }\r\n    }\r\n}","import {bindable} from 'aurelia-framework';\r\n\r\nexport class ArticleBlock {\r\n    @bindable block;\r\n\r\n}","\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\nimport {bindable, inject} from 'aurelia-framework';\r\n\r\n@inject(EventAggregator)\r\nexport class BlockActions {\r\n    @bindable block;\r\n\r\n    constructor(eventAggregator) {\r\n        this.eventAggregator = eventAggregator;\r\n        this.subscriptions = [];\r\n        this.moveBlockUpChannel = 'move-block-up';\r\n        this.moveBlockDownChannel = 'move-block-down';\r\n    }\r\n\r\n    blockChanged(newValue, oldValue) {\r\n        //if(this.requiresAction()) {\r\n        //    this.subscriptions.push(\r\n        //        this.eventAggregator.subscribe(\"apply-changes-\"+newValue.BlockId, block => {\r\n        //            block.isEditing = false;\r\n        //        })\r\n        //     );\r\n        //}\r\n    }\r\n\r\n    startEditing () {\r\n        this.block.isEditing = true;\r\n    }\r\n    \r\n    startDeleting () {\r\n        this.block.isDeleting = true;\r\n    }\r\n    \r\n\r\n    cancelEditing() {\r\n        this.block.isEditing = false;\r\n        this.block.isDeleting = false;\r\n    }    \r\n    \r\n    addBlock() {\r\n        if (this.block.blockType !== 'Select') {\r\n            this.block.isNew = false;\r\n            this.block.isEditing = true;\r\n        }\r\n    }\r\n\r\n    deleteBlock() {\r\n        this.block.deleted = true;\r\n        this.block.isDeleting = false;\r\n\r\n        let blockDeletedChannel = 'delete-block';\r\n        this.eventAggregator.publish(blockDeletedChannel, this.block);\r\n    }\r\n\r\n    applyChanges() {\r\n        if(this.requiresAction()) {\r\n            let channel = 'article-block-' + this.block.blockId;\r\n            this.eventAggregator.publish(channel, true);\r\n        } else {\r\n            this.block.isEditing = false;\r\n        }\r\n    }\r\n\r\n    requiresAction() {\r\n        return this.block.items\r\n            || this.block.blockType === 'Image'\r\n            || this.block.blockType === 'OrderedList';\r\n    }\r\n\r\n    moveUp() {\r\n        this.eventAggregator.publish(this.moveBlockUpChannel, this.block);\r\n    }\r\n\r\n    moveDown() {\r\n        this.eventAggregator.publish(this.moveBlockDownChannel, this.block);\r\n    }\r\n}","import {bindable} from 'aurelia-framework';\r\n\r\nexport class HeadingBlock {\r\n    @bindable block;\r\n\r\n    constructor() {\r\n        this.headingTypes = ['H1','H2','H3','H4','H5'];\r\n    }\r\n}","import {bindable, inject} from 'aurelia-framework';\r\nimport {EventAggregator} from 'aurelia-event-aggregator';\r\nimport {BlobServices} from '../../../services/blob-services';\r\nimport $ from 'jquery';\r\n\r\n@inject(EventAggregator, BlobServices)\r\nexport class ImageBlock {\r\n    @bindable block;\r\n\r\n    constructor(eventAggregator, blobServices) {\r\n        this.eventAggregator = eventAggregator;\r\n        this.blobServices = blobServices;\r\n        this.selectedFiles = [];\r\n        this.subscriptions = [];\r\n        this.image = [];\r\n        this.subscribed = false;\r\n    }\r\n    blockChanged(newValue, oldValue) {\r\n        if (this.isValidBlock()) {\r\n            this.subscribe();\r\n        }\r\n    }\r\n\r\n    subscribe() {\r\n        if (this.subscribed !== true) {\r\n            this.channel = 'article-block-' + this.block.blockId;\r\n            this.subscriptions.push(this.eventAggregator.subscribe(this.channel, update => this.updateBlock(update)));\r\n            this.subscribed = true;\r\n        }\r\n    }\r\n\r\n    updateBlock(update) {\r\n        if (this.isValidBlock()) {\r\n\r\n            if (this.selectedFiles.length > 0) {\r\n                let reader = new FileReader();\r\n                let file = this.selectedFiles.item(0);\r\n                let self = this;\r\n                reader.addEventListener(\"loadend\", function() {\r\n                    if (reader.readyState === 2) {\r\n                        self.blobServices.post(file.name, reader.result)\r\n                            .then(content => {\r\n                                self.block.imageUrl = content.imageUrl;\r\n                                self.block.isEditing = false;\r\n                            });\r\n                    }\r\n                });\r\n                reader.readAsDataURL(file);\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    isValidBlock() {\r\n        return this.block.blockType === 'Image';\r\n    }\r\n\r\n    blobToUrl(blob) {\r\n        this.subscribe();\r\n        return URL.createObjectURL(blob);\r\n    }\r\n}\r\n\r\n\r\nexport class BlobToUrlValueConverter {  \r\n    toView(blob) {\r\n        this.imageUrl = URL.createObjectURL(blob);\r\n        return this.imageUrl;\r\n    }\r\n}\r\n\r\nexport class FileListToArrayValueConverter {  \r\n    toView(fileList) {\r\n        let files = [];\r\n        if (!fileList) {\r\n            return files;\r\n        }\r\n        for(let i = 0; i < fileList.length; i++) {\r\n            files.push(fileList.item(i));\r\n        }\r\n        return files;\r\n    }\r\n}","export function configure(config) {\r\n    config.globalResources(\r\n        './article-block',\r\n        './heading-block',\r\n        './paragraph-block',\r\n        './image-block',\r\n        './ordered-list-block',\r\n        './block-actions',\r\n        './new-block'\r\n    );\r\n}","import {bindable} from 'aurelia-framework';\r\n\r\nexport class NewBlock {\r\n    @bindable block;\r\n\r\n    constructor () {\r\n        this.blockTypes = ['Heading','Image','OrderedList','Paragraph'];\r\n    }\r\n\r\n}","import {EventAggregator} from 'aurelia-event-aggregator';\r\nimport {bindable, inject} from 'aurelia-framework';\r\nimport $ from 'jquery';\r\n\r\n@inject(EventAggregator)\r\nexport class OrderedListBlock {\r\n    @bindable block;\r\n\r\n    constructor(eventAggregator) {\r\n        this.eventAggregator = eventAggregator;\r\n        this.subscriptions = [];\r\n        this.subscribed = false;\r\n    }\r\n\r\n    blockChanged(newValue, oldValue) {\r\n        if(this.isValidBlock()) {\r\n            this.subscribe();\r\n        }\r\n    }\r\n\r\n    subscribe() {\r\n        this.channel = 'article-block-' + this.block.blockId;\r\n        this.subscriptions.push(this.eventAggregator.subscribe(this.channel, update => this.updateBlock(update)));\r\n        this.subscribed = true;\r\n    }\r\n\r\n    updateBlock(update) {\r\n        if(this.isValidBlock()) {\r\n            let block = this.block;\r\n            let items = [];\r\n\r\n            let blockId = this.block.blockId;\r\n            let index = 0;\r\n\r\n            this.block.Items.forEach(function(item) {\r\n                let id = blockId + '-' + index;\r\n                items.push($(`#${id}`).val());\r\n                index++;\r\n            });\r\n\r\n            block.Items = items;\r\n            //this.eventAggregator.publish(\"apply-changes-\"+blockId, block);\r\n            block.isEditing = false;\r\n        }\r\n    }\r\n\r\n    appendItem() {\r\n        if(this.isValidBlock()) {\r\n            if (!this.block.items) {\r\n                this.block.items = [];\r\n                if (this.subscribed !== true) {\r\n                    this.subscribe();\r\n                }\r\n            }\r\n            this.block.Items.push('');\r\n        }\r\n    }\r\n\r\n    deleteItem(pos) {\r\n        if(this.isValidBlock()) {\r\n            this.block.items.splice(pos, 1);\r\n        }\r\n    }\r\n\r\n    detached() {\r\n        this.subscriptions.forEach(function (subscription) {\r\n            subscription.dispose();\r\n        });\r\n    }\r\n\r\n    isValidBlock() {\r\n        return this.block.blockType === 'OrderedList';\r\n    }\r\n}","import {bindable} from 'aurelia-framework';\r\n\r\nexport class ParagraphBlock {\r\n    @bindable block;\r\n}","import 'npm-anystock';\r\nimport {bindable} from 'aurelia-framework';\r\n\r\nexport class AnyChart {\r\n    @bindable container = 'container';\r\n\r\n    constructor() {\r\n    }\r\n\r\n    containerChanged(newValue, oldValue) {\r\n        this.draw(newValue);\r\n    }\r\n\r\n    generateSome(data) {\r\n\r\n    }\r\n\r\n    draw(container) {\r\n\r\n        anychart.onDocumentReady(function() {\r\n\r\n\r\n            // defining the chart type\r\n            var chart = anychart.stock();\r\n\r\n            var table = anychart.data.table();\r\n            table.addData([\r\n                ['2015-12-24T12:00:00', '511.53', '514.98', '505.79', '506.40'],\r\n                ['2015-12-25T12:00:00', '512.53', '514.88', '505.69', '507.34'],\r\n                ['2015-12-26T12:00:00', '511.83', '514.98', '505.59', '506.23'],\r\n                ['2015-12-27T12:00:00', '511.22', '515.30', '505.49', '506.47'],\r\n                ['2015-12-28T12:00:00', '510.35', '515.72', '505.23', '505.80'],\r\n                ['2015-12-29T12:00:00', '510.53', '515.86', '505.38', '508.25'],\r\n                ['2015-12-30T12:00:00', '511.43', '515.98', '505.66', '507.45'],\r\n                ['2015-12-31T12:00:00', '511.50', '515.33', '505.99', '507.98'],\r\n                ['2016-01-01T12:00:00', '511.32', '514.29', '505.99', '506.37'],\r\n                ['2016-01-02T12:00:00', '511.70', '514.87', '506.18', '506.75'],\r\n                ['2016-01-03T12:00:00', '512.30', '514.78', '505.87', '508.67'],\r\n                ['2016-01-04T12:00:00', '512.50', '514.77', '505.83', '508.35'],\r\n                ['2016-01-05T12:00:00', '511.53', '516.18', '505.91', '509.42'],\r\n                ['2016-01-06T12:00:00', '511.13', '516.01', '506.00', '509.26'],\r\n                ['2016-01-07T12:00:00', '510.93', '516.07', '506.00', '510.99'],\r\n                ['2016-01-08T12:00:00', '510.88', '515.93', '505.22', '509.95'],\r\n                ['2016-01-09T12:00:00', '509.12', '515.97', '505.15', '510.12'],\r\n                ['2016-01-10T12:00:00', '508.53', '516.13', '505.66', '510.42'],\r\n                ['2016-01-11T12:00:00', '508.90', '516.24', '505.73', '510.40']\r\n            ]);\r\n\r\n            // mapping the data\r\n            var mapping = table.mapAs();\r\n            mapping.addField('open', 1, 'first');\r\n            mapping.addField('high', 2, 'max');\r\n            mapping.addField('low', 3, 'min');\r\n            mapping.addField('close', 4, 'last');\r\n            mapping.addField('value', 4, 'last');\r\n\r\n            // set the series type\r\n            chart.plot(0).ohlc(mapping).name('ACME Corp.');\r\n\r\n            /*\r\n            table = anychart.data.table();\r\ntable.addData([\r\n['2016-01-01T12:00:00', 1.0860],\r\n['2016-01-04T12:00:00', 1.0832],\r\n['2016-01-05T12:00:00', 1.0780],\r\n['2016-01-06T12:00:00', 1.0781],\r\n['2016-01-07T12:00:00', 1.0936],\r\n['2016-01-08T12:00:00', 1.0932]\r\n]);\r\n\r\n// map the data\r\nmapping = table.mapAs();\r\nmapping.addField('value', 1);\r\n\r\nvar series = chart.plot(1).line(mapping);\r\nseries.name(\"Euro to Dollar Rate\");\r\n            */\r\n\r\n\r\n            // setting the chart title\r\n            chart.title('AnyStock Basic Sample');\r\n\r\n            chart.container(container);\r\n            chart.draw();\r\n\r\n        });\r\n    }\r\n\r\n\r\n}\r\n",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"sourceRoot":"..\\src"}